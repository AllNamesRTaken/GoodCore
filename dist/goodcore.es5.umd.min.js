!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.goodcore={})}(this,function(t){"use strict";var e=function(){function t(){}return t.ROTATION_DEGREE_PRECISION=1,t.RADIAN_FACTOR=1/360*(2*Math.PI),t.DEGREE_FACTOR=1/(2*Math.PI)*360,t.DEG360=360*t.ROTATION_DEGREE_PRECISION,t.ROTATION_LOOKUP=function(){for(var e=[],n=0;n<360*t.ROTATION_DEGREE_PRECISION;n++)e.push([Math.cos(n*t.RADIAN_FACTOR),Math.sin(n*t.RADIAN_FACTOR)]);return e}(),t}();function n(t){var n=t*e.DEGREE_FACTOR*e.ROTATION_DEGREE_PRECISION|0;return this.rotationDeg(n/e.ROTATION_DEGREE_PRECISION)}var r,i=Object.freeze({CalcConst:e,sign:function(t){return"number"==typeof t?t?t<0?-1:1:t==t?0:NaN:NaN},rotationDeg:function(t){for(var n=t*e.ROTATION_DEGREE_PRECISION|0;n<0;)n+=e.DEG360;for(;n>=e.DEG360;)n-=e.DEG360;return e.ROTATION_LOOKUP[n]},rotationRad:n,closestRadianRotation:function(t){for(var n=t*e.DEGREE_FACTOR*e.ROTATION_DEGREE_PRECISION|0;n<0;)n+=e.DEG360;for(;n>=e.DEG360;)n-=e.DEG360;return n*e.RADIAN_FACTOR/e.ROTATION_DEGREE_PRECISION}}),o=function(){function t(){}return t.EPSILON=1e-8,t.IDENTITY={x:1,y:1},t.X_DIM={x:1,y:0},t.Y_DIM={x:0,y:1},t}(),s=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.angle=this.horizontalAngle,this.direction=this.horizontalAngle,this.x=t,this.y=e}return Object.defineProperty(t.prototype,"isZero",{get:function(){return 0===this.x&&0===this.y},enumerable:!0,configurable:!0}),t.prototype.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new this.constructor(t,e)},t.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(t){return t?t.set(this):this.create(this.x,this.y)},t.prototype.toInt=function(){return this.x|=0,this.y|=0,this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.prototype.toDecimal=function(){return this.x+=o.EPSILON,this.y+=o.EPSILON,this},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},t.prototype.length=function(){return Math.sqrt(this.lengthSq())},t.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},t.prototype.rotate=function(t){var e=n(t),r=this.x*e[0]-this.y*e[1],i=this.x*e[1]+this.y*e[0];return this.x=r,this.y=i,this},t.prototype.rotateAround=function(t,e){return this.subtract(t).rotate(e).add(t)},t.prototype.normalize=function(){var t=this.length();return 0===t?(this.x=1,this.y=0):(this.x=this.x/t,this.y=this.y/t),this},t.prototype.scale=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this},t.prototype.relate=function(t){return this.x=this.x/t.x,this.y=this.y/t.y,this},t.prototype.multiply=function(t){return this.x=this.x*t,this.y=this.y*t,this},t.prototype.add=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},t.prototype.subtract=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},t.prototype.invert=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.almostEquals=function(t){return Math.abs(this.x-t.x)<o.EPSILON&&Math.abs(this.y-t.y)<o.EPSILON},t.prototype.getNormal=function(t){var e=this.clone();t||e.set(this).normalize();var n=e.x;return e.x=e.y,e.y=-n,e},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.projectOnto=function(t){var e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this},t.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},t.prototype.rotateBy=function(t){var e=-this.horizontalAngle()+t;return this.rotate(e)},t.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},t.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},t.prototype.zero=function(){return this.x=0,this.y=0,this},t}(),a=function(){function t(t,e,n,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=!1),this.start=new s(t,e),this.stop=new s(n,r),this.endInclusive=i}return Object.defineProperty(t.prototype,"isZero",{get:function(){return this.start.isZero&&this.stop.isZero},enumerable:!0,configurable:!0}),t.prototype.create=function(t,e,n,r,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=!1),new this.constructor(t,e,n,r,i)},t.prototype.set=function(t){return this.start.set(t.start),this.stop.set(t.stop),this},t.prototype.clone=function(t){return t?t.set(this):this.create(this.start.x,this.start.y,this.stop.x,this.stop.y)},t.prototype.toRange2=function(t){var e=t||new u,n=this.start,r=this.stop;return e.pos.x=n.x,e.pos.y=n.y,e.size.x=r.x+(this.endInclusive?r.x<n.x?-1:1:0)-n.x,e.size.y=r.y+(this.endInclusive?r.y<n.y?-1:1:0)-n.y,e},t.prototype.scale=function(t,e){void 0===e&&(e=!0);var n=this.stop.x-this.start.x,r=this.stop.y-this.start.y,i=n,o=r;return i*=t.x,o*=t.y,e&&(this.start.x-=(i-n)/2,this.start.y-=(o-r)/2),this.stop.x=this.start.x+i,this.stop.y=this.start.y+o,this},t.prototype.translate=function(t){return this.start.scale(t),this.stop.scale(t),this},t.prototype.equals=function(t){return this.start.equals(t.start)&&this.stop.equals(t.stop)},t.prototype.toInt=function(){return this.start.toInt(),this.stop.toInt(),this},t.prototype.toDecimal=function(){return this.start.toDecimal(),this.stop.toDecimal(),this},t.prototype.area=function(){return(this.stop.x-this.start.x)*(this.stop.y-this.start.y)},t.prototype.move=function(t){return this.start.add(t),this.stop.add(t),this},t.prototype.contains=function(t){return this.start.x<=t.start.x&&this.start.y<=t.start.y&&this.stop.x>=t.stop.x&&this.stop.y>=t.stop.y},t.prototype.intersect=function(t){return this.containsPoint(t.start.x,t.start.y)||this.containsPoint(t.stop.x,t.stop.y)||this.containsPoint(t.start.x,t.stop.y)||this.containsPoint(t.stop.x,t.start.y)},t.prototype.containsPoint=function(t,e){return this.start.x<=t&&this.stop.x>=t&&this.start.y<=e&&this.stop.y>=e},t.prototype.zero=function(){return this.start.zero(),this.stop.zero(),this},t}(),u=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.pos=new s(t,e),this.size=new s(n,r)}return Object.defineProperty(t.prototype,"isZero",{get:function(){return this.pos.isZero&&this.size.isZero},enumerable:!0,configurable:!0}),t.prototype.create=function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),new this.constructor(t,e,n,r)},t.prototype.set=function(t){return this.pos.set(t.pos),this.size.set(t.size),this},t.prototype.clone=function(t){return t?t.set(this):this.create(this.pos.x,this.pos.y,this.size.x,this.size.y)},t.prototype.toRect=function(t,e){void 0===t&&(t=!1);var n=e||new a;return n.start.x=this.pos.x,n.start.y=this.pos.y,n.stop.x=this.pos.x-(t?this.size.x<0?-1:1:0)+this.size.x,n.stop.y=this.pos.y-(t?this.size.y<0?-1:1:0)+this.size.y,n.endInclusive=t,n},t.prototype.scale=function(t,e){void 0===e&&(e=!0);var n=null;return e&&(n=this.size.clone()),this.size.scale(t),e&&this.pos.add(n.subtract(this.size).multiply(.5)),this},t.prototype.translate=function(t){return this.toRect(!1).translate(t).toRange2(this),this},t.prototype.toInt=function(){return this.pos.toInt(),this.size.toInt(),this},t.prototype.toDecimal=function(){return this.pos.toDecimal(),this.size.toDecimal(),this},t.prototype.contains=function(t){return this.pos.x<=t.pos.x&&this.pos.y<=t.pos.y&&this.pos.x+this.size.x>=t.pos.x+t.size.x&&this.pos.y+this.size.y>=t.pos.y+t.size.y},t.prototype.intersect=function(t){var e=this.toRect(),n=t.clone().toRect();return e.intersect(n)},t.prototype.containsPoint=function(t){return t.x>=this.pos.x&&t.x<=this.pos.x+this.size.x-1&&t.y>=this.pos.y&&t.y<=this.pos.y+this.size.y-1},t.prototype.first=function(t){for(var e=new s,n=this.pos.x,r=this.pos.y,i=0;i<this.size.x;i++)for(var o=0;o<this.size.y;o++)if(e.x=i+n,e.y=o+r,t(e))return e;return null},t.prototype.forEach=function(t,e){void 0===e&&(e=null);var n=new s,r=this.pos.clone().toInt();null!==e&&this.containsPoint(e)||(e=r);for(var i=this.pos.clone().add(this.size).toInt(),o=r.y;o<i.y;o+=1)for(var a=r.x;a<i.x;a+=1){if(!(o<e.y||o===e.y&&a<e.x))if(n.x=a,n.y=o,t(n))return}},t.prototype.equals=function(t){return this.pos.equals(t.pos)&&this.size.equals(t.size)},t.prototype.zero=function(){return this.pos.zero(),this.size.zero(),this},t}(),c=!0;"undefined"==typeof window?(r=null,c=!1):r=window;var h=new(function(){function t(){this._window=r,this._nativeWindow=c}return Object.defineProperty(t.prototype,"window",{get:function(){return this._window},set:function(t){this._window=t,this.hasNativeWindow&&(r=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasNativeWindow",{get:function(){return this._nativeWindow},enumerable:!0,configurable:!0}),t}()),l=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},f=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t};function p(){return null!==h.window}function y(){return this.hasWindow()&&void 0!==h.window.console||"function"==typeof console}function d(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function v(t){return"[object Function]"===Object.prototype.toString.call(t)}function _(t){return t===+t}function g(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,r=-1,i=!1;!i&&++r<n;)i=null==t[r];return i}function m(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!g.apply(void 0,f(t))}function x(t){return null==t}function b(t){return!x(t)}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,r=-1,i=!1;!i&&++r<n;)i=void 0===t[r];return i}function O(t){return void 0===t}function E(t){return!O(t)}var I=Object.freeze({hasWindow:p,hasConsole:y,isArray:d,isElement:function(t){return null!=t&&1===t.nodeType},isFunction:v,isNumber:_,isInt:function(t){return _(t)&&t===(0|t)},isString:function(t){return b(t)&&t.constructor===String},areNullOrUndefined:g,areNotNullOrUndefined:m,isNullOrUndefined:x,isNotNullOrUndefined:b,areUndefined:w,areNotUndefined:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!w.apply(void 0,f(t))},isUndefined:O,isNotUndefined:E});function j(t){for(var e=Object.keys(t),n=-1,r=e.length;++n<r;)delete t[e[n]]}function S(t){if(void 0!==t.constructor.prototype.clear)t.clear();else for(var e=Object.keys(t),n=-1,r=e.length;++n<r;)t[e[n]]=null}function A(t,e){return m(t,e)&&t instanceof e.constructor}function z(t,e){return m(t,e)&&t.constructor===e.constructor}function P(t,e){var n=t===e;if(t!==e&&t instanceof Object&&z(t,e))if(d(t)){var r=0;if(n=(s=t.length)===e.length)for(;r<s&&!1!==(n=P(t[r],e[r]));r+=1);}else if(t.constructor.prototype.equals)n=t.equals(e);else{var i=Object.keys(t),o=null;n=!0;r=-1;for(var s=i.length;++r<s;)if(!(n=P(t[o=i[r]],e[o]))){if(!v(t[o]))break;n=!0}}return n}function R(t,e){return!P(t,e)}function N(t){var e;if(t instanceof Object)if(void 0!==t.constructor.prototype.clone)e=t.clone();else if(d(t))e=K(t);else{if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);e=new t.constructor;for(var n=Object.keys(t),r=null,i=-1,o=n.length;++i<o;)e[r=n[i]]=N(t[r])}else e=t;return e}function D(t,e,n){for(var r,i=Object.keys(e),o=-1,s=i.length;++o<s;)e[r=i[o]],n&&r in n&&(r=n[r]),r in t&&(t[r]=e[i[o]])}var T=Object.freeze({destroy:function(t){void 0!==t.constructor.prototype.destroy?t.destroy():S(t)},wipe:j,setNull:S,isClassOf:A,isSameClass:z,inherits:function(t,e){return A(t,e)&&!z(t,e)},equals:P,isDifferent:R,shallowCopy:function(t){for(var e=Object.keys(t),n={},r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n},clone:N,cloneInto:function t(e,n){if(d(n)){var r=e,i=n,o=r.length;i.length=o;for(var s=-1;++s<o;)r[s]instanceof Object?t(r[s],i[s]):i[s]=r[s]}else{var a=Object.keys(e),u=null;for(s=-1,o=a.length;++s<o;){var c=e[u=a[s]];if(c instanceof Object){var h=n[u];null==h&&(h=d(c)?n[u]=[]:n[u]={}),R(c,h)&&t(c,h)}else n[u]=c}}return n},mixin:function(t,e){void 0===t&&(t={});for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t,o=n?n.length:0,s=0;for(n=C(n);s<o;s++){var a=n[s];if(v(a)&&(a=a.prototype),void 0!==a){var u=Object.keys(a),c=null;if(e)for(var h=-1,l=u.length;++h<l;)c=u[h],e.hasOwnProperty(c)||(t[c]=a[c]);else for(var f=-1,p=u.length;++f<p;)t[c=u[f]]=a[c]}}return i},setProperties:D}),k=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},M=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(k(arguments[e]));return t};function C(t){return function t(e,n){void 0===n&&(n=[]);var r=-1;var i=x(e)?0:e.length;for(;++r<i;)d(e[r])?t(e[r],n):n.push(e[r]);return n}(t)}function L(t){var e=null,n=null,r=x(t)?0:t.length;for(e=0;e<r/2;e+=1){n=r-1-e;var i=t[e];t[e]=t[n],t[n]=i}return t}function U(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Array.prototype.concat.apply([],t)}function F(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1/0);var r=Math.min(x(t)?0:t.length-e,n);r<0&&(r=0);for(var i=-1,o=new Array(r);++i<r;)o[i]=t[i+e];return o}function q(t,e,n,r){if(void 0===e&&(e=0),void 0===n&&(n=1/0),void 0===r&&(r=[]),x(t))throw new Error("Unable to splice on null or undefined");var i=t.length;e=Math.max(0,e),e=Math.min(e,i),n=Math.max(0,n),n=Math.min(n,i-e);var o=r.length,s=i-n+o,a=n-o;if(a<0){t.length=s;for(var u=s;--u>=e+n;)t[u]=t[u+a]}for(var c=e-1;++c<e+o;)t[c]=r[c-e];if(a>0){for(--c;++c<i-a;)t[c]=t[c+a];t.length=s}}function G(t,e){for(var n=-1,r=t.length,i=x(e)?0:e.length;++n<i;)t[r+n]=e[n]}function Z(t,e){var n,r=x(t)?0:t.length;if(e>=0&&e<r){var i=e;for(n=t[e];++i<r;)t[i-1]=t[i];t.length-=1}return n}function B(t,e){for(var n=-1,r=x(t)?0:t.length;++n<r;)if(t[n]===e)return n;return-1}function J(t,e){Z(t,B(t,e))}function V(t,e){for(var n=-1,r=x(t)?0:t.length;++n<r;)if(e(t[n]))return n;return-1}function W(t){for(var e=-1,n=x(t)?0:t.length,r=new Array(n);++e<n;)r[e]=t[e];return r}function H(t,e){var n=-1,r=x(t)?0:t.length;for(e.length=r;++n<r;)e[n]=t[n]}function K(t){for(var e=-1,n=x(t)?0:t.length,r=new Array(n);++e<n;)r[e]=N(t[e]);return r}function Y(t,e){var n=-1,r=x(t)?0:t.length;for(e.length=r;++n<r;)e[n]=N(t[n])}function X(t,e){for(var n=[],r=-1,i=x(t)?0:t.length;++r<i;){var o=t[r];!0===e(o,r)&&n.push(o)}return n}function Q(t,e,n){for(var r=-1,i=0,o=x(t)?0:t.length,s=e.length;++r<o;){var a=t[r];!0===n(a,r)&&(i<s?e[i++]=a:(++i,e.push(a)))}e.length=i}function $(t,e){for(var n=-1,r=x(t)?0:t.length,i=new Array(r);++n<r;)i[n]=e(t[n],n);return i}function tt(t,e,n){var r=-1,i=x(t)?0:t.length;for(e.length=i;++r<i;)e[r]=n(t[r],r)}function et(t,e,n){for(var r=-1,i=x(t)?0:t.length,o=n;++r<i;)o=e(o,t[r]);return o}function nt(t,e,n,r){for(var i=-1,o=x(t)?0:t.length,s=r;++i<o&&!n(s,t[i]);)s=e(s,t[i]);return s}function rt(t,e,n){for(var r=x(t)?0:t.length,i=n;--r>=0;)i=e(i,t[r]);return i}function it(t,e,n,r){for(var i=x(t)?0:t.length,o=r;--i>=0&&!n(o,t[i]);)o=e(o,t[i]);return o}function ot(t,e,n){void 0===n&&(n=0);for(var r=n-1,i=x(t)?0:t.length;++r<i;)e(t[r],r)}function st(t,e,n){for(var r=-1,i=x(t)?0:t.length;++r<i;){var o=t[r];e(o,r)&&n(o,r)}}function at(t,e,n,r){for(var i=O(n)||_(n),o=O(r=i?n:r)||r<0?-1:r-1,s=x(t)?0:t.length;++o<s&&(i?!e(t[o],o):!e(t[o],o)&&(n(t[o],o),1)););}function ut(t,e){for(var n=x(t)?0:t.length;--n>=0;)e(t[n],n)}function ct(t,e,n){for(var r=x(t)?0:t.length,i=O(n);--r>=0&&(i?!e(t[r],r):!e(t[r],r)&&(n(t[r],r),1)););}function ht(t,e){for(var n=!1,r=-1,i=x(t)?0:t.length;++r<i&&!(n=e(t[r])););return n}function lt(t,e){for(var n=!0,r=-1,i=x(t)?0:t.length;++r<i&&(n=e(t[r])););return n}function ft(t,e,n){if(x(t))throw new Error("Unable to insertAt on null or undefined");if(0===e)t.unshift(n);else if(e>0){for(var r=t.length;--r>=e;)t[r+1]=t[r];t[r+1]=n}}function pt(t,e,n){void 0===n&&(n=!1);for(var r,i=0,o=x(t)?-1:t.length-1;i<=o;){var s=e(t[r=i+o>>1]);if(s<0)i=r+1;else{if(!(s>0))return r;o=r-1}}return n?i:-1}function yt(t,e){(t||-1)<0&&(t=0);for(var n=new Array(t),r=-1;++r<t;)n[r]=e(r,n);return n}function dt(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=k(n),o=i[0],s=i.slice(1);return E(o)?E(o.prototype.deserialize)?tt(t,e,function(t){return(e=new o).deserialize.apply(e,M([t],s));var e}):tt(t,e,function(t){var e=new o;return D(e,t),e}):Y(t,e),this}var vt=Object.freeze({flatten:C,reverse:L,concat:U,slice:F,splice:q,append:G,removeAt:Z,indexOfElement:B,remove:J,indexOf:V,removeOneByFn:function(t,e){Z(t,V(t,e))},shallowCopy:W,shallowCopyInto:H,shallowFill:function(t,e,n){void 0===n&&(n=0);var r=-1,i=x(t)?0:t.length;for(e.length<i+n&&(e.length=i+n);++r<i;)e[n+r]=t[r]},deepCopy:K,deepCopyInto:Y,deepFill:function(t,e,n){void 0===n&&(n=0);var r=-1,i=x(t)?0:t.length;for(e.length<i+n&&(e.length=i+n);++r<i;)e[n+r]=N(t[r])},filter:X,filterInto:Q,map:$,mapInto:tt,reduce:et,reduceUntil:nt,reverseReduce:rt,reverseReduceUntil:it,forEach:ot,forSome:st,until:at,reverseForEach:ut,reverseUntil:ct,some:ht,all:lt,insertAt:ft,binarySearch:pt,create:yt,deserialize:dt}),_t=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},gt=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},mt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_t(arguments[e]));return t},xt=function(){function t(){this._lookup=Object.create(null),this._list=new Ot,this._isDirty=!1}return t.prototype.create=function(){return new this.constructor},t.prototype.has=function(t){return void 0!==this._lookup[t]},t.prototype.contains=function(t){return this.has(t)},t.prototype.get=function(t){return this._lookup[t]},t.prototype.set=function(t,e){return this._isDirty=this._isDirty||this.has(t),void 0!==e&&(this._lookup[t]=e,this._isDirty||this._list.push(e)),this},t.prototype.delete=function(t){return this.has(t)&&(delete this._lookup[t],this._isDirty=!0),this},t.prototype.clear=function(){return j(this._lookup),this._list.clear(),this},Object.defineProperty(t.prototype,"values",{get:function(){return this.cleanList(),this._list.values},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this._lookup)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this.cleanList(),this._list},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._isDirty?this.keys.length:this._list.count},enumerable:!0,configurable:!0}),t.prototype.cleanList=function(){this._isDirty&&this.reCreateList()},t.prototype.reCreateList=function(){var t=this._lookup,e=Object.keys(this._lookup),n=-1,r=this._list;for(r.clear();++n<e.length;)r.add(t[e[n]])},t.prototype.clone=function(){var t=this.create();return t._isDirty=this._isDirty,t._list=this._list.clone(),t._lookup=N(this._lookup),t},t.prototype.toJSON=function(){return this._lookup},t.prototype.serialize=function(){var t=this,e=Object.create(null);return ot(this.keys,function(n){var r=t.get(n);e[n]=v(r.serialize)?r.serialize():r}),e},t.prototype.deserialize=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i,o,s,a,u,c,h=_t(e),l=h[0],f=h.slice(1);if(this.clear(),E(l))if(E(l.prototype.deserialize))try{for(var p=gt(Object.keys(t)),y=p.next();!y.done;y=p.next()){var d=y.value;this.set(d,(o=new l).deserialize.apply(o,mt([t[d]],f)))}}catch(t){r={error:t}}finally{try{y&&!y.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}else try{for(var v=gt(Object.keys(t)),_=v.next();!_.done;_=v.next()){d=_.value;var g=new l;D(g,t[d]),this.set(d,g)}}catch(t){s={error:t}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}else try{for(var m=gt(Object.keys(t)),x=m.next();!x.done;x=m.next()){d=x.value;this.set(d,t[d])}}catch(t){u={error:t}}finally{try{x&&!x.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}return this},t}(),bt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},wt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bt(arguments[e]));return t};window.Symbol=window.Symbol||{iterator:"iterator"};var Ot=function(){function t(e){this._array=[],this._index=null,this._indexer=null,this._pointer=0,this._array=void 0===e?new Array:W(e instanceof t?e._array:e)}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(t){return{done:this._pointer>=this.length,value:this._pointer<this.length?this._array[this._pointer++]:void(this._pointer=0)}},t.prototype.create=function(t){return new this.constructor(t)},Object.defineProperty(t.prototype,"values",{get:function(){return this._array},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._array[t]},t.prototype.getByIndex=function(t){return b(this._index)?this._index.get(t):void 0},t.prototype.set=function(t,e){if(!(t>=0&&t<this.length))throw new Error("index out of bounds on <List>.set("+t+", "+e.toString()+")");return this._array[0|t]=e,null!==this._indexer&&this._index.set(this._indexer(e),e),this},Object.defineProperty(t.prototype,"count",{get:function(){return this._array.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._array.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indexer",{get:function(){return this._indexer},set:function(t){this._indexer=t,this._reindex()},enumerable:!0,configurable:!0}),t.prototype._reindex=function(){var t=this;null===this._indexer?this._index=null:(null===this._index?this._index=new xt:this._index.clear(),this.forEach(function(e){return t._index.set(t._indexer(e),e)}))},t.prototype.fill=function(t,e){return t=Math.max(0,t||0),v(e)?this._array=yt(t,e):e instanceof Object?this._array=yt(t,function(){return N(e)}):this._array=yt(t,function(){return e}),this._reindex(),this},t.prototype.clear=function(){return this._array.length=0,null!==this._index&&this._index.clear(),this},t.prototype.add=function(t){return this._array.push(t),null!==this._indexer&&this._index.set(this._indexer(t),t),this},t.prototype.insertAt=function(t,e){return ft(this._array,t,e),null!==this._indexer&&this._index.set(this._indexer(e),e),this},t.prototype.push=function(t){return null!==this._indexer&&this._index.set(this._indexer(t),t),this._array.push(t)},t.prototype.pop=function(){var t=this._array.pop();return void 0!==t&&null!==this._indexer&&this._index.delete(this._indexer(t)),t},t.prototype.shift=function(){var t=this._array.shift();return void 0!==t&&null!==this._indexer&&this._index.delete(this._indexer(t)),t},t.prototype.concat=function(e){var n,r=e instanceof t?e.values:e;return n=U(this._array,r),this.create(n)},t.prototype.index=function(t){var e=this;null!==this._indexer&&ot(t,function(t){e._index.set(e._indexer(t),t)})},t.prototype.unindexEl=function(t){null!==this._indexer&&this._index.delete(this._indexer(t))},t.prototype.append=function(e){var n=e instanceof t?e.values:e;return G(this._array,n),this.index(n),this},t.prototype.copy=function(e){var n=e instanceof t?e.values:e;return Y(n,this._array),this.index(n),this},t.prototype.shallowCopy=function(e){var n=e instanceof t?e.values:e;return H(n,this._array),this.index(n),this},t.prototype.clone=function(){var t=K(this._array),e=this.create(t);return null!==this._indexer&&(e._indexer=this._indexer,e._index=this._index.clone()),e},t.prototype.remove=function(t){return J(this._array,t),this.unindexEl(t),this},t.prototype.removeFirst=function(t){var e=this.removeAt(this.indexOf(t));return this.unindexEl(e),e},t.prototype.removeAt=function(t){var e=Z(this._array,t);return this.unindexEl(e),e},t.prototype.forEach=function(t,e){return void 0===e&&(e=0),ot(this._array,t,e),this},t.prototype.forSome=function(t,e){return st(this._array,t,e),this},t.prototype.until=function(t,e,n){return at(this._array,t,e,n),this},t.prototype.reverseForEach=function(t){return ut(this._array,t),this},t.prototype.reverseUntil=function(t,e){return ct(this._array,t,e),this},t.prototype.some=function(t){return ht(this._array,t)},t.prototype.all=function(t){return lt(this._array,t)},t.prototype.indexOf=function(t){return v(t)?V(this._array,t):B(this._array,t)},t.prototype.contains=function(t){return v(t)?void 0!==this.find(t):null!==this._indexer?this._index.contains(this._indexer(t)):-1!==B(this._array,t)},t.prototype.reverse=function(){return L(this._array),this},t.prototype.first=function(t){var e=-1;return-1===(e=void 0===t?0:V(this._array,t))?void 0:this.get(e)},t.prototype.find=function(t){return this.first(t)},t.prototype.last=function(){return 0===this.length?void 0:this.get(this.length-1)},t.prototype.filter=function(t){return this.create(X(this._array,t))},t.prototype.select=function(t){return this.create(X(this._array,t))},t.prototype.selectInto=function(e,n){var r=e instanceof t?e.values:e;return Q(r,this._array,n),this.index(r),this},t.prototype.head=function(t){return void 0===t&&(t=1),t=Math.max(0,t),this.create(F(this._array,0,t))},t.prototype.tail=function(t){return void 0===t&&(t=1),t=Math.min(this._array.length,t),this.create(F(this._array,Math.max(0,this._array.length-t)))},t.prototype.splice=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=1/0),void 0===n&&(n=[]),q(this._array,t,e,d(n)?n:n.values),this._reindex(),this},t.prototype.orderBy=function(t){return this._array.sort(t),this},t.prototype.map=function(t){return this.create($(this._array,t))},t.prototype.mapInto=function(e,n){return tt(e instanceof t?e.values:e,this._array,n),this._reindex(),this},t.prototype.reduce=function(t,e){return et(this._array,t,e)},t.prototype.reduceUntil=function(t,e,n){return nt(this._array,t,e,n)},t.prototype.reverseReduce=function(t,e){return rt(this._array,t,e)},t.prototype.reverseReduceUntil=function(t,e,n){return it(this._array,t,e,n)},t.prototype.equals=function(t){return P(this._array,t.values)},t.prototype.same=function(t){var e=this,n=0;return e.length===t.length&&(null!==e.indexer?t.until(function(t){return!e.contains(t)},function(t,e){return++n}):e.until(function(e){return!t.contains(e)},function(t,e){return++n})),n===e.length},t.prototype.intersect=function(t){var e,n,r=this.create();return r.indexer=this.indexer,this.length<t.length?(n=this,e=t):(e=this,n=t),null!==e.indexer?n.forEach(function(t){e.contains(t)&&r.push(t)}):e.forEach(function(t){n.contains(t)&&r.push(t)}),r},t.prototype.union=function(t){var e,n,r=this.create();return r.indexer=this.indexer,this.length<t.length?(n=this,e=t):(e=this,n=t),null!==e.indexer?(r=e.clone(),n.forEach(function(t){e.contains(t)||r.push(t)})):(r=n.clone(),e.forEach(function(t){n.contains(t)||r.push(t)})),r},t.prototype.subtract=function(t){var e=this.create();return e.indexer=this.indexer,e=this.select(function(e){return!t.contains(e)})},t.prototype.zip=function(t,e){void 0===e&&(e=function(t,e){return[t,e]});var n=this.create(),r=t.length;return this.until(function(t,e){return e>=r},function(r,i){n.push(e(r,t.get(i)))}),n},t.prototype.unzip=function(t){void 0===t&&(t=function(t){return[t[0],t[1]]});var e=[this.create(),this.create()];return this.forEach(function(n){var r=t(n);e[0].push(r[0]),e[1].push(r[1])}),e},t.prototype.flatten=function(t){return void 0===t&&(t=1/0),this.create(t<1?this.values:this._flattenInner(this.values,t))},t.prototype._flattenInner=function(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=[]);var o=-1,s=e.length;if(++r>n)i.push(e);else for(;++o<s;)d(e[o])?this._flattenInner(e[o],n,r,i):e[o]instanceof t?this._flattenInner(e[o].values,n,r,i):i.push(e[o]);return i},t.prototype.toJSON=function(){return this.values},t.prototype.serialize=function(){return this.values.map(function(t){return v(t.serialize)?t.serialize():t})},t.prototype.deserialize=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return dt.apply(vt,wt([t,this._array],e)),this},t}(),Et=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},It=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Et(arguments[e]));return t};window.Symbol=window.Symbol||{iterator:"iterator"};var jt,St=function(){function t(e,n){void 0===e&&(e=function(t,e){return t<e?-1:t===e?0:1}),this._list=new Ot,this._pointer=0,this._cmp=e,void 0===n?this._list=new Ot:n instanceof Ot||n instanceof t?this.copy(n.values):this.copy(n)}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(t){return{done:this._pointer>=this.length,value:this._pointer<this.length?this.values[this._pointer++]:void(this._pointer=0)}},t.prototype.create=function(t,e){return new this.constructor(t,e)},Object.defineProperty(t.prototype,"values",{get:function(){return this._list.values},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._list.get(t)},Object.defineProperty(t.prototype,"count",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"comparer",{get:function(){return this._cmp},set:function(t){this._cmp=t,this.sort()},enumerable:!0,configurable:!0}),t.prototype.sort=function(){this._list.orderBy(this._cmp)},t.prototype.fill=function(t,e){return this._list.fill(t,e),this.sort(),this},t.prototype.clear=function(){return this._list.clear(),this},t.prototype.add=function(t){var e=this.getInsertIndex(t);return this._list.insertAt(e,t),this},t.prototype.pop=function(){return this._list.pop()},t.prototype.shift=function(){return this._list.shift()},t.prototype.bulkAdd=function(e){return e instanceof Ot||e instanceof t?this._list.append(e.values):this._list.append(e),this.sort(),this},t.prototype.copy=function(e){return e instanceof Ot||e instanceof t?this._list.copy(e.values):this._list.copy(e),this.sort(),this},t.prototype.clone=function(){return this.create(this._cmp,this._list.clone())},t.prototype.remove=function(t){var e=this.indexOf(t);return-1!==e&&this._list.removeAt(e),this},t.prototype.removeAt=function(t){return this._list.removeAt(t)},t.prototype.removeFirst=function(t){return this._list.removeFirst(t)},t.prototype.forEach=function(t,e){return void 0===e&&(e=0),this._list.forEach(t,e),this},t.prototype.forSome=function(t,e){return this._list.forSome(t,e),this},t.prototype.until=function(t,e,n){return this._list.until(t,e,n),this},t.prototype.reverseForEach=function(t){return this._list.reverseForEach(t),this},t.prototype.reverseUntil=function(t,e){return this._list.reverseUntil(t,e),this},t.prototype.some=function(t){return this._list.some(t)},t.prototype.all=function(t){return this._list.all(t)},t.prototype.getInsertIndex=function(t){var e=this;return pt(this._list.values,function(n){return e._cmp(n,t)},!0)},t.prototype.indexOf=function(t){var e=this;return t instanceof Function?this._list.indexOf(t):pt(this._list.values,function(n){return e._cmp(n,t)},!1)},t.prototype.contains=function(t){return-1!==this.indexOf(t)},t.prototype.first=function(t){return this._list.first(t)},t.prototype.find=function(t){return this._list.find(t)},t.prototype.last=function(){return this._list.last()},t.prototype.filter=function(t){return this.create(this._cmp,this._list.filter(t))},t.prototype.select=function(t){return this.create(this._cmp,this._list.filter(t))},t.prototype.selectInto=function(e,n){return e instanceof Ot||e instanceof t?this._list.selectInto(e.values,n):this._list.selectInto(e,n),this.sort(),this},t.prototype.head=function(t){return void 0===t&&(t=1),this.create(this.comparer,this._list.head(t))},t.prototype.tail=function(t){return void 0===t&&(t=1),this.create(this.comparer,this._list.tail(t))},t.prototype.map=function(t){return this._list.map(t)},t.prototype.mapInto=function(e,n){return e instanceof Ot||e instanceof t?this._list.mapInto(e.values,n):this._list.mapInto(e,n),this.sort(),this},t.prototype.reduce=function(t,e){return this._list.reduce(t,e)},t.prototype.reduceUntil=function(t,e,n){return this._list.reduceUntil(t,e,n)},t.prototype.reverseReduce=function(t,e){return this._list.reverseReduce(t,e)},t.prototype.reverseReduceUntil=function(t,e,n){return this._list.reverseReduceUntil(t,e,n)},t.prototype.equals=function(t){return P(this._list.values,t.values)},t.prototype.same=function(t){return this.equals(t)},t.prototype.intersect=function(e){var n,r,i=this.create(this.comparer);if(this.length>0&&e.length>0)if(this.length<e.length?(r=this,n=e):(n=this,r=e),e instanceof t&&this.comparer===e.comparer)for(var o=n.getInsertIndex(r.get(0))-1,s=n.getInsertIndex(r.last())-1,a=-1,u=r.length;o<s&&++a<u;){for(var c=r.get(a),h=void 0;++o<s&&(h=this.comparer(n.get(o),c))<0;);o<s&&0===h&&i.add(c)}else n instanceof t||n instanceof Ot&&null!==n.indexer?r.forEach(function(t){n.contains(t)&&i.add(t)}):i=i.bulkAdd(r.toList().intersect(n));return i},t.prototype.union=function(e){var n,r,i;if(this.length>0||e.length>0)if(this.length<e.length?(i=this,r=e):(r=this,i=e),e instanceof t&&this.comparer===e.comparer){n=this.create(this.comparer,r.values);for(var o=r.getInsertIndex(i.get(0))-1,s=r.getInsertIndex(i.last())-1,a=-1,u=i.length;++a<u&&o<s;){for(var c=i.get(a),h=-1;++o<s&&(h=this.comparer(r.get(o),c))<0;);(h>0&&o<s||o===s)&&n.add(c)}if(a<u)for(--a;++a<u;)n.add(i.get(a))}else r instanceof t||r instanceof Ot&&null!==r.indexer?(n=this.create(this.comparer,r.values),i.forEach(function(t){r.contains(t)||n.add(t)})):n=this.create(this.comparer,i.toList().union(r));else n=this.create(this.comparer);return n},t.prototype.toList=function(){return new Ot(this.values)},t.prototype.toJSON=function(){return this.values},t.prototype.serialize=function(){return this.values.map(function(t){return v(t.serialize)?t.serialize():t})},t.prototype.deserialize=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=this._list).deserialize.apply(e,It([t],n)),this.sort(),this},t}(),At=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},zt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(At(arguments[e]));return t},Pt=function(){function t(t){this.DEFAULT_SIZE=100,this._pos=0,this._limit=0,t||(t=this.DEFAULT_SIZE),this.DEFAULT_SIZE=t,this._array=new Array(t),this.push=this.fastPush}return Object.defineProperty(t.prototype,"values",{get:function(){return F(this._array,0,this._pos)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return this._limit},set:function(t){t<0&&(t=0),this._limit=t,0===t?this.push=this.fastPush:(this.push=this.limitedPush,this.limitObjects())},enumerable:!0,configurable:!0}),t.prototype.create=function(t){return new this.constructor(t)},t.prototype.push=function(t){},t.prototype.fastPush=function(t){this._array[this._pos++]=t},t.prototype.limitedPush=function(t){this._array[this._pos]=t,++this._pos,this.limitObjects()},t.prototype.pop=function(){var t=void 0;return 0!==this._pos&&(t=this._array[--this._pos]),t},t.prototype.peek=function(){return this._array[this._pos-1]},t.prototype.peekAt=function(t){return t<0||t>=this._pos?void 0:this._array[this._pos-t-1]},t.prototype.toList=function(){new Ot;return new Ot(this.values)},t.prototype.clear=function(){return this._pos=0,this._array.length=this.DEFAULT_SIZE,this},t.prototype.clone=function(){var t=K(this._array),e=this.create(this.DEFAULT_SIZE);return e._array=t,e._limit=this._limit,e._pos=this._pos,e},t.prototype.limitObjects=function(){for(;this._pos>this._limit;)this._array.shift(),--this._pos},t.prototype.toJSON=function(){return F(this.values,0,this._pos)},t.prototype.serialize=function(){return F(this.values,0,this._pos).map(function(t){return v(t.serialize)?t.serialize():t})},t.prototype.deserialize=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return dt.apply(void 0,zt([t,this._array],e)),this._pos=t.length,this},t}(),Rt=(jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function Nt(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rt(e,t),e.prototype.init=function(t,e){return D(this,t,e),this},e}(t)}var Dt=function(){function t(){}return t._hasPerformance="undefined"!=typeof performance,t}(),Tt=function(){function t(){}return Object.defineProperty(t,"time",{get:function(){return Dt._time},enumerable:!0,configurable:!0}),t.now=function(){if(Dt._hasPerformance)return performance.now();var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},t.start=function(){var e=t.now();return Dt._start=Dt._last=e,Dt._time=0},t.stop=function(){var e=Dt._start,n=t.now();return Dt._last=n,Dt._time=n-e},t}(),kt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Mt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kt(arguments[e]));return t},Ct=function(){function t(){}return t._int=0,t}();function Lt(){var t=(new Date).getTime();return t+=Tt.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}function Ut(){}function Ft(t,e,n){var r=(t=E(t.prototype)?t.prototype:t)[e];t[e]=n.bind(t,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0!==e.length?r.apply(this||t,e):r.call(this||t)})}var qt,Gt=Object.freeze({init:function(t){void 0!==t&&(h.window=t)},getFunctionName:function(t){var e;if(void 0!==t.hasOwnProperty("name"))e=t.name;else{var n=t.toString();e=n.substring(9,n.indexOf("("))}return e},getFunctionCode:function(t){var e=t.toString();return e.substring(e.indexOf("{")+1,e.lastIndexOf("}"))},newUUID:Lt,newInt:function(){return Ct._int++},callDebugger:Ut,pipeOut:function(t,e,n){if(y())Ft(console,"log",function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.apply(void 0,Mt(n)),t.apply(void 0,Mt(n))}),Ft(console,"warn",function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.apply(void 0,Mt(n)),e.apply(void 0,Mt(n))}),Ft(console,"error",function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t.apply(void 0,Mt(e)),n.apply(void 0,Mt(e))});else{var r={log:t,warn:e,error:n};p()||(h.window={}),h.window.console=r}},assert:function(t,e,n){void 0===n&&(n=!0);var r=!0;return t||y&&(r=!1,console.error("Assertion failed: "+e)),r},proxyFn:Ft,loop:function(t,e){for(var n=-1;++n<t;)e(n)},toArray:function(t){return Array.prototype.slice.call(t)}}),Zt=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},Bt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Jt=function(){function t(){this.id="",this.parent=null,this.children=null,this.data=null,this.virtual=!1,this.id=Lt()}return e=t,t.fromObject=function(t){var n=this instanceof e?this:null,r=(new e).init({id:t.id||Lt(),data:t.data,parent:n});return void 0!==t.children&&d(t.children)&&(r.children=new Ot($(t.children,e.fromObject.bind(r)))),r},t.fromNodeList=function(t,n,r){void 0===r&&(r=!1);var i=new e,o=function(t){return n&&void 0!==n[t]?"string"==typeof n[t]?function(e){return e[n[t]]}:n[t]:function(e){return e[t]}},s={id:o("id"),parent:o("parent"),data:o("data")},a=new Ot(t),u=new xt,c=a.map(function(t){return(new e).init({id:s.id(t),data:s.data(t)})});c.forEach(function(t,e){u.has(t.id)||u.set(t.id,[]),u.get(t.id).push(t)});var h=new Ot;return a.forEach(function(t,e){var n=s.parent(t);s.id(t);u.contains(n)?u.get(n).forEach(function(t){return t.add(c.get(e))}):h.add(c.get(e))}),!1===r?i=h.first():(i=(new e).init({id:Lt(),virtual:!0}),h.forEach(function(t){return i.add(t)})),i},t.prototype.create=function(){return new this.constructor},t.prototype.init=function(t){return D(this,t),this},t.prototype.insertAt=function(t,e){null===this.children||this.children.count<=t?this.add(e):this.children.insertAt(t,this.create().init({data:e,parent:this}))},t.prototype.add=function(t){null===this.children&&(this.children=new Ot),z(t,this)?(t.parent=this,this.children.add(t)):this.children.add(this.create().init({data:t,parent:this}))},t.prototype.remove=function(){null!==this.parent&&this.parent.children.remove(this)},t.prototype.prune=function(){return null!==this.children&&this.children.forEach(function(t,e){t.parent=null}).clear(),this.children=null,this},t.prototype.reduce=function(t,e){var n,r,i=new Pt,o=e;for(t||(t=function(t,e){return t.push({id:e.id,parent:e.parent?e.parent.id:null,data:e.data}),t}),void 0===e&&(o=[]),i.push(this);n=i.pop();)for(o=t(o,n),r=n.children&&n.children.count||0;r--;)i.push(n.children.get(r));return o},t.prototype.clone=function(){var t=new this.constructor;return t.id=this.id,t.parent=this.parent,t.children=null===this.children?null:this.children.clone(),t.data=null===this.data||void 0===this.data?this.data:N(this.data),t},t.prototype.duplicateNode=function(){var t=new this.constructor;return t.id=this.id,t.parent=this.parent,t.children=this.children,t.data=this.data,t},t.prototype.filter=function(t){var e=this.duplicateNode();return null!==this.children&&(e.children=e.children.select(t).map(function(e,n){return e.filter(t)})),e},t.prototype.select=function(t,e){void 0===e&&(e=new Ot);var n=e,r=this.children;return(void 0===t||t(this))&&n.add(this),r&&r.reduce(function(e,n){return n.select(t,e)},n),n},t.prototype.find=function(t){var e=null;if(null!==this.children)for(var n=-1,r=this.children.count,i=this.children.values;++n<r;){if(t(i[n].data)){e=i[n];break}if(null!==(e=null!==i[n].children?i[n].find(t):null))break}return e},t.prototype.contains=function(t){return null!==this.find(t)},t.prototype.depth=function(){for(var t=0,e=this;e.parent;)e=e.parent,++t;return t},t.prototype.toJSON=function(){var t=new Ot;return t.push({id:this.id,data:this.data,parent:null===this.parent?null:this.parent.id,children:null===this.children?null:this.children.map(function(t){return t.id})}),null!==this.children&&this.children.forEach(function(e){return t.append(e.toJSON())}),t.toJSON()},t.prototype.serialize=function(){var t=new Ot;return t.push({id:this.id,data:this.data,parent:null===this.parent?null:this.parent.id,children:null===this.children?null:this.children.map(function(t){return t.id})}),null!==this.children&&this.children.forEach(function(e){return t.append(e.serialize())}),t.serialize()},t=e=Zt([Nt,Bt("design:paramtypes",[])],t);var e}(),Vt=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(qt||(qt={}));var Wt=function(){function t(){}return t.Sides=qt,t._window=h.window,t._document=h.window?h.window.document:void 0,t._el=h.window?h.window.document.createElement("div"):void 0,t}();function Ht(t){return Array.prototype.slice.call(t)}function Kt(t,e){var n,r,i,o,s,a,u;if(n="string"==typeof t?Xt(t):t,void 0!==e&&"object"==typeof e)for(r=Object.keys(e),i=0;i<r.length;i++)if("style"===r[i])for(s=e[r[i]],a=Object.keys(s),o=0;o<a.length;o++)"string"==typeof(u=s[a[o]])?n.style.setProperty(a[o],u):n.style.setProperty(a[o],u[0],u[1]);else"classes"===r[i]&&void 0!==e[r[i]]&&e[r[i]].join?n.setAttribute("className",e[r[i]].join(" ")):n.setAttribute(r[i],e[r[i]])}function Yt(t){for(var e=t.children.length;e--;)t.removeChild(t.children[e])}function Xt(t){var e=Wt._document.getElementById(t);return null===e&&(e=Wt._document.body),e}function Qt(t,e){var n=!1;if(e.matches)n=e.matches(t);else if(e.msMatchesSelector)n=e.msMatchesSelector(t);else if(e.webkitMatchesSelector)n=e.webkitMatchesSelector(t);else{if(null===e.parentElement)throw new Error("Element has no parent");n=""!==e.id?null!==e.parentElement.querySelector("#"+e.id):-1!==Ht(e.parentElement.querySelectorAll(t)).indexOf(e)}return n}var $t=Object.freeze({get Sides(){return qt},init:function(t){h.window=t,Wt._window=h.window,Wt._document=Wt._window.document,Wt._el=Wt._document.createElement("div")},toArray:Ht,create:function(t,e){var n;return Wt._el.innerHTML=t,Kt(n=Wt._el.children[0],e),Yt(Wt._el),n},outerHTML:function(t){Wt._el.appendChild(t);var e=Wt._el.innerHTML;return Yt(Wt._el),e},setAttr:Kt,remove:function(t){return void 0===t.parentNode?null:t.parentNode.removeChild(t)},replace:function(t,e){var n=e;return t.parentNode&&t.parentNode.replaceChild(e,t),n},clear:Yt,get:Xt,find:function(t){return Wt._document.querySelector(t)},findAll:function(t,e){return Ht((e||Wt._document).querySelectorAll(t))},children:function(t,e){var n=Ht((t||Wt._document).children);return void 0===e?n:n.filter(Qt.bind(this,e))},findParent:function(t,e){for(var n=t.parentElement;n&&!Qt(e,n);)n=n.parentElement;return n},position:function(t,e,n){t.style.top=n+"px",t.style.left=e+"px"},is:Qt,setStylesExplicitly:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i,o=Wt._window.getComputedStyle(t);try{for(var s=Vt(e),a=s.next();!a.done;a=s.next()){var u=a.value;t.style[u]=o[u]}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}}),te=function(){function t(){this._a=null,this.hash="",this.pathName="",this.port="",this.hostName="",this.protocol="",this.origin="",this.full="",this.args={},this.init()}return t.prototype.init=function(){if(null!==h.window){this._a=h.window.document.createElement("a"),this._a.setAttribute("href",h.window.location.href);var t=this.args;this._a.search.substring(1).split("&").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),this.hash=this._a.hash,this.pathName=this._a.pathname,this.port=this._a.port,this.hostName=this._a.hostname,this.protocol=this._a.protocol,this.origin=this._a.origin,this.full=this._a.href}},t}(),ee=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ne=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},re=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ne(arguments[e]));return t};function ie(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(this,re(e))||this}return ee(e,t),e.prototype.release=function(){this.__pool__.release(this)},e.prototype.initPool=function(t){this.__pool__=t},e}(t)}var oe=function(t,e,n){var r=n.value;return n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new Promise(function(n,i){try{n(r.apply(t,e))}catch(t){i(t)}})},n};oe.before=function(t){return function(e,n,r){var i=r.value;return r.value=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise(function(r,o){var s=function(){i.apply(e,n).then(function(t){r(t)}).catch(function(t){o(t)})};t.apply(e,[i.name].concat(n)).then(function(t){s()}).catch(function(t){s()})})},r}},oe.after=function(t){return function(e,n,r){var i=r.value;return r.value=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise(function(r,o){var s=function(s,a){t.apply(e,[s,a,i.name].concat(n)).then(function(t){r(t)}).catch(function(t){o(t)})};i.apply(e,n).then(function(t){s(t,void 0)}).catch(function(t){s(void 0,t)})})},r}},oe.provided=function(t){return function(e,n,r){var i=r.value;return r.value=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise(function(r,o){t.apply(e,[i.name].concat(n)).then(function(t){t?i.apply(e,n).then(function(t){r(t)}).catch(function(t){o(t)}):o(!1)}).catch(function(t){o(t)})})},r}};var se,ae=function(){function t(t,e){void 0===e&&(e=10),this._pool=[],this._available=0,this._size=0,this._cls=t,this._growthStep=e,this.create()}return Object.defineProperty(t.prototype,"available",{get:function(){return this._available},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.create=function(){for(var t=0;t<this._growthStep;t++)this._pool.push(new this._cls);this._size+=this._growthStep,this._available+=this._growthStep},t.prototype.get=function(){var t;return 0===this._pool.length&&this.create(),t=this._pool.pop(),--this._available,t.initPool(this),t},t.prototype.release=function(t){this._pool.push(t),++this._available},t}();!function(t){t[t.LinearInt=0]="LinearInt",t[t.RandomInt=1]="RandomInt",t[t.LinearFloat=2]="LinearFloat",t[t.RandomFloat=3]="RandomFloat"}(se||(se={}));var ue=" ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var ce=Object.freeze({get MocDataType(){return se},VALID_CHARS:ue,randomString:function(t){void 0===t&&(t=25);for(var e="",n=0;n<t;n+=1)e+=ue.charAt(Math.floor(Math.random()*ue.length));return e},randomInt:function(){return 0|this.randomNumber()},randomNumber:function(){return 2147483647*Math.random()},numericArray:function(t,e){void 0===e&&(e=se.LinearInt);var n=new Array(t);switch(e){case se.RandomInt:for(var r=0;r<t;r+=1)n[r]=this.randomInt();break;case se.LinearFloat:for(r=0;r<t;r+=1)n[r]=r+.5;break;case se.RandomFloat:for(r=0;r<t;r+=1)n[r]=this.randomNumber();break;default:for(r=0;r<t;r+=1)n[r]=r}return n},stringArray:function(t,e){for(var n=new Array(t),r=-1;++r<t;)n[r]=this.randomString(e);return n}}),he=function(){return function(){}}(),le=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};t.Calc=i,t.Dom=$t,t.Arr=vt,t.Obj=T,t.Util=Gt,t.Test=I,t.MocData=ce,t.Vec2=s,t.Vec2Const=o,t.Range2=u,t.Rect=a,t.List=Ot,t.SortedList=St,t.Dictionary=xt,t.Stack=Pt,t.Tree=Jt,t.Timer=Tt,t.Uri=te,t.Poolable=ie,t.Initable=Nt,t.before=function(t){return function(e,n,r){var i=r.value;return r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(this,[i.name].concat(e)),i.apply(this,e)},r}},t.after=function(t){return function(e,n,r){var i=r.value;return r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=i.apply(this,[i.name].concat(e));return t.apply(this,e),r},r}},t.around=function(t){return function(e,n,r){var i=r.value;return r.value=function(){for(var e,n=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t.apply(this,[function(){return e=i.apply(n,r)},i.name].concat(r)),e},r}},t.provided=function(t){return function(e,n,r){var i=r.value;return r.value=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(this,[i.name].concat(n))&&(e=i.apply(this,n)),e},r}},t.async=oe,t.Pool=ae,t.integrate=function(t){var e,n,r=!1,o=[{name:"Arr",object:vt},{name:"Calc",object:i},{name:"Dom",object:$t},{name:"MocData",object:ce},{name:"Obj",object:T},{name:"Initable",object:Nt},{name:"Poolable",object:ie},{name:"Pool",object:ae},{name:"Dictionary",object:xt},{name:"KeyValuePair",object:he},{name:"List",object:Ot},{name:"Range2",object:u},{name:"Rect",object:a},{name:"Stack",object:Pt},{name:"Tree",object:Jt},{name:"Vec2",object:s},{name:"Test",object:I},{name:"Timer",object:Tt},{name:"Uri",object:te},{name:"Util",object:Gt}];"string"==typeof t&&(h.window[t]={},r=!0);try{for(var c=le(o),l=c.next();!l.done;l=c.next()){var f=l.value;r?h.window[t][f.name]=f.object:h.window[f.name]=f.object}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}},t.KeyValuePair=he,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=goodcore.es5.umd.min.js.map
