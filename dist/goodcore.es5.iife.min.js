var goodcore=function(t){"use strict";function n(t){var n=t*dt.DEGREE_FACTOR*dt.ROTATION_DEGREE_PRECISION|0;return this.rotationDeg(n/dt.ROTATION_DEGREE_PRECISION)}function e(){return null!==wt.window}function r(){return this.hasWindow()&&void 0!==wt.window.console||"function"==typeof console}function i(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"[object Function]"===Object.prototype.toString.call(t)}function s(t){return t===+t}function u(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e,r=t.length,i=-1,o=!1;!o&&++i<r;)o=void 0===(e=t[i])||null===e;return o}function a(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!u.apply(void 0,Et(t))}function c(t){return void 0===t||null===t}function h(t){return!c(t)}function l(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.length,r=-1,i=!1;!i&&++r<e;)i=void 0===t[r];return i}function f(t){return void 0===t}function p(t){return!f(t)}function y(t){for(var n=Object.keys(t),e=-1,r=n.length;++e<r;)delete t[n[e]]}function d(t){if(void 0!==t.constructor.prototype.clear)t.clear();else for(var n=Object.keys(t),e=-1,r=n.length;++e<r;)t[n[e]]=null}function v(t,n){return a(t,n)&&t instanceof n.constructor}function _(t,n){return a(t,n)&&t.constructor===n.constructor}function g(t,n){var e=t===n;if(t!==n&&t instanceof Object&&_(t,n))if(i(t)){u=0;if(e=(a=t.length)===n.length)for(;u<a&&!1!==(e=g(t[u],n[u]));u+=1);}else if(t.constructor.prototype.equals)e=t.equals(n);else{var r=Object.keys(t),s=null;e=!0;for(var u=-1,a=r.length;++u<a;)if(s=r[u],!(e=g(t[s],n[s]))){if(!o(t[s]))break;e=!0}}return e}function m(t,n){return!g(t,n)}function x(t){var n;if(t instanceof Object)if(void 0!==t.constructor.prototype.clone)n=t.clone();else if(i(t))n=M(t);else{if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);n=new t.constructor;for(var e=Object.keys(t),r=null,o=-1,s=e.length;++o<s;)n[r=e[o]]=x(t[r])}else n=t;return n}function b(t,n){if(i(n)){var e=t,r=n,o=e.length;r.length=o;for(a=-1;++a<o;)e[a]instanceof Object?b(e[a],r[a]):r[a]=e[a]}else for(var s=Object.keys(t),u=null,a=-1,o=s.length;++a<o;){var c=t[u=s[a]];if(c instanceof Object){var h=n[u];void 0!==h&&null!==h||(h=i(c)?n[u]=[]:n[u]={}),m(c,h)&&b(c,h)}else n[u]=c}return n}function w(t,n,e){for(var r,i=Object.keys(n),o=-1,s=i.length;++o<s;)n[r=i[o]],e&&r in e&&(r=e[r]),r in t&&(t[r]=n[i[o]])}function O(t){return E(t)}function E(t,n){void 0===n&&(n=[]);for(var e=-1,r=c(t)?0:t.length;++e<r;)i(t[e])?E(t[e],n):n.push(t[e]);return n}function I(t){var n=null,e=null,r=c(t)?0:t.length;for(n=0;n<r/2;n+=1){e=r-1-n;var i=t[n];t[n]=t[e],t[e]=i}return t}function j(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Array.prototype.concat.apply([],t)}function S(t,n,e){void 0===n&&(n=0),void 0===e&&(e=1/0);var r=Math.min(c(t)?0:t.length-n,e);r<0&&(r=0);for(var i=-1,o=new Array(r);++i<r;)o[i]=t[i+n];return o}function A(t,n,e,r){if(void 0===n&&(n=0),void 0===e&&(e=1/0),void 0===r&&(r=[]),c(t))throw new Error("Unable to splice on null or undefined");var i=t.length;n=Math.max(0,n),n=Math.min(n,i),e=Math.max(0,e),e=Math.min(e,i-n);var o=r.length,s=i-e+o,u=e-o;if(u<0){t.length=s;for(var a=s;--a>=n+e;)t[a]=t[a+u]}for(var h=n-1;++h<n+o;)t[h]=r[h-n];if(u>0){for(--h;++h<i-u;)t[h]=t[h+u];t.length=s}}function z(t,n){for(var e=-1,r=t.length,i=c(n)?0:n.length;++e<i;)t[r+e]=n[e]}function P(t,n){var e,r=c(t)?0:t.length;if(n>=0&&n<r){var i=n;for(e=t[n];++i<r;)t[i-1]=t[i];t.length-=1}return e}function R(t,n){for(var e=-1,r=c(t)?0:t.length;++e<r;)if(t[e]===n)return e;return-1}function N(t,n){P(t,R(t,n))}function D(t,n){for(var e=-1,r=c(t)?0:t.length;++e<r;)if(n(t[e]))return e;return-1}function T(t){for(var n=-1,e=c(t)?0:t.length,r=new Array(e);++n<e;)r[n]=t[n];return r}function k(t,n){var e=-1,r=c(t)?0:t.length;for(n.length=r;++e<r;)n[e]=t[e]}function M(t){for(var n=-1,e=c(t)?0:t.length,r=new Array(e);++n<e;)r[n]=x(t[n]);return r}function C(t,n){var e=-1,r=c(t)?0:t.length;for(n.length=r;++e<r;)n[e]=x(t[e])}function L(t,n){for(var e=[],r=-1,i=c(t)?0:t.length;++r<i;){var o=t[r];!0===n(o,r)&&e.push(o)}return e}function U(t,n,e){for(var r=-1,i=0,o=c(t)?0:t.length,s=n.length;++r<o;){var u=t[r];!0===e(u,r)&&(i<s?n[i++]=u:(++i,n.push(u)))}n.length=i}function F(t,n){for(var e=-1,r=c(t)?0:t.length,i=new Array(r);++e<r;)i[e]=n(t[e],e);return i}function q(t,n,e){var r=-1,i=c(t)?0:t.length;for(n.length=i;++r<i;)n[r]=e(t[r],r)}function G(t,n,e){for(var r=-1,i=c(t)?0:t.length,o=e;++r<i;)o=n(o,t[r]);return o}function Z(t,n,e,r){for(var i=-1,o=c(t)?0:t.length,s=r;++i<o&&!e(s,t[i]);)s=n(s,t[i]);return s}function B(t,n,e){for(var r=c(t)?0:t.length,i=e;--r>=0;)i=n(i,t[r]);return i}function J(t,n,e,r){for(var i=c(t)?0:t.length,o=r;--i>=0&&!e(o,t[i]);)o=n(o,t[i]);return o}function V(t,n,e){void 0===e&&(e=0);for(var r=e-1,i=c(t)?0:t.length;++r<i;)n(t[r],r)}function W(t,n,e){for(var r=-1,i=c(t)?0:t.length;++r<i;){var o=t[r];n(o,r)&&e(o,r)}}function H(t,n,e,r){for(var i=f(e)||s(e),o=f(r=i?e:r)||r<0?-1:r-1,u=c(t)?0:t.length;++o<u&&(i?!n(t[o],o):!(n(t[o],o)||(e(t[o],o),!1))););}function K(t,n){for(var e=c(t)?0:t.length;--e>=0;)n(t[e],e)}function Y(t,n,e){for(var r=c(t)?0:t.length,i=f(e);--r>=0&&(i?!n(t[r],r):!(n(t[r],r)||(e(t[r],r),!1))););}function X(t,n){for(var e=!1,r=-1,i=c(t)?0:t.length;++r<i&&!(e=n(t[r])););return e}function Q(t,n){for(var e=!0,r=-1,i=c(t)?0:t.length;++r<i&&(e=n(t[r])););return e}function $(t,n,e){if(c(t))throw new Error("Unable to insertAt on null or undefined");if(0===n)t.unshift(e);else if(n>0){for(var r=t.length;--r>=n;)t[r+1]=t[r];t[r+1]=e}}function tt(t,n,e){void 0===e&&(e=!1);for(var r,i,o=0,s=c(t)?-1:t.length-1;o<=s;){var u=n(i=t[r=o+s>>1]);if(u<0)o=r+1;else{if(!(u>0))return r;s=r-1}}return e?o:-1}function nt(t,n){(t||-1)<0&&(t=0);for(var e=new Array(t),r=-1;++r<t;)e[r]=n(r,e);return e}function et(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=St(e),o=i[0],s=i.slice(1);return p(o)?p(o.prototype.deserialize)?q(t,n,function(t){return(n=new o).deserialize.apply(n,At([t],s));var n}):q(t,n,function(t){var n=new o;return w(n,t),n}):C(t,n),this}function rt(t){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Bt(n,t),n.prototype.init=function(t,n){return w(this,t,n),this},n}(t)}function it(){var t=(new Date).getTime();return t+=Vt.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===n?e:3&e|8).toString(16)})}function ot(t){return void 0===t&&(t=""),void 0===Yt._counter[t]&&(Yt._counter[t]=new Kt(t.toString())),Yt._counter[t]}function st(){}function ut(t,n,e){var r=(t=p(t.prototype)?t.prototype:t)[n];t[n]=e.bind(t,function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return 0!==n.length?r.apply(this||t,n):r.call(this||t)})}function at(t){return Array.prototype.slice.call(t)}function ct(t,n){var e;e="string"==typeof t?lt(t):t;var r,i,o,s,u,a;if(void 0!==n&&"object"==typeof n)for(r=Object.keys(n),i=0;i<r.length;i++)if("style"===r[i])for(s=n[r[i]],u=Object.keys(s),o=0;o<u.length;o++)"string"==typeof(a=s[u[o]])?e.style.setProperty(u[o],a):e.style.setProperty(u[o],a[0],a[1]);else"classes"===r[i]&&void 0!==n[r[i]]&&n[r[i]].join?e.setAttribute("className",n[r[i]].join(" ")):e.setAttribute(r[i],n[r[i]])}function ht(t){for(var n=t.children.length;n--;)t.removeChild(t.children[n])}function lt(t){var n=on._document.getElementById(t);return null===n&&(n=on._document.body),n}function ft(t,n){var e=!1;if(n.matches)e=n.matches(t);else if(n.msMatchesSelector)e=n.msMatchesSelector(t);else if(n.webkitMatchesSelector)e=n.webkitMatchesSelector(t);else{if(null===n.parentElement)throw new Error("Element has no parent");e=""!==n.id?null!==n.parentElement.querySelector("#"+n.id):-1!==at(n.parentElement.querySelectorAll(t)).indexOf(n)}return e}function pt(t){return function(t){function n(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.apply(this,hn(n))||this}return an(n,t),n.prototype.release=function(){this.__pool__.release(this)},n.prototype.initPool=function(t){this.__pool__=t},n}(t)}var yt,dt=function(){function t(){}return t.ROTATION_DEGREE_PRECISION=1,t.RADIAN_FACTOR=1/360*(2*Math.PI),t.DEGREE_FACTOR=1/(2*Math.PI)*360,t.DEG360=360*t.ROTATION_DEGREE_PRECISION,t.ROTATION_LOOKUP=function(){for(var n=[],e=0;e<360*t.ROTATION_DEGREE_PRECISION;e++)n.push([Math.cos(e*t.RADIAN_FACTOR),Math.sin(e*t.RADIAN_FACTOR)]);return n}(),t}(),vt=Object.freeze({CalcConst:dt,sign:function(t){return"number"==typeof t?t?t<0?-1:1:t==t?0:NaN:NaN},rotationDeg:function(t){for(var n=t*dt.ROTATION_DEGREE_PRECISION|0;n<0;)n+=dt.DEG360;for(;n>=dt.DEG360;)n-=dt.DEG360;return dt.ROTATION_LOOKUP[n]},rotationRad:n,closestRadianRotation:function(t){for(var n=t*dt.DEGREE_FACTOR*dt.ROTATION_DEGREE_PRECISION|0;n<0;)n+=dt.DEG360;for(;n>=dt.DEG360;)n-=dt.DEG360;return n*dt.RADIAN_FACTOR/dt.ROTATION_DEGREE_PRECISION}}),_t=function(){function t(){}return t.EPSILON=1e-8,t.IDENTITY={x:1,y:1},t.X_DIM={x:1,y:0},t.Y_DIM={x:0,y:1},t}(),gt=function(){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.angle=this.horizontalAngle,this.direction=this.horizontalAngle,this.x=t,this.y=n}return Object.defineProperty(t.prototype,"isZero",{get:function(){return 0===this.x&&0===this.y},enumerable:!0,configurable:!0}),t.prototype.create=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=0),new this.constructor(t,n)},t.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(t){return t?t.set(this):this.create(this.x,this.y)},t.prototype.toInt=function(){return this.x|=0,this.y|=0,this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.prototype.toDecimal=function(){return this.x+=_t.EPSILON,this.y+=_t.EPSILON,this},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},t.prototype.length=function(){return Math.sqrt(this.lengthSq())},t.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},t.prototype.rotate=function(t){var e=n(t),r=this.x*e[0]-this.y*e[1],i=this.x*e[1]+this.y*e[0];return this.x=r,this.y=i,this},t.prototype.rotateAround=function(t,n){return this.subtract(t).rotate(n).add(t)},t.prototype.normalize=function(){var t=this.length();return 0===t?(this.x=1,this.y=0):(this.x=this.x/t,this.y=this.y/t),this},t.prototype.scale=function(t){return this.x=this.x*t.x,this.y=this.y*t.y,this},t.prototype.relate=function(t){return this.x=this.x/t.x,this.y=this.y/t.y,this},t.prototype.multiply=function(t){return this.x=this.x*t,this.y=this.y*t,this},t.prototype.add=function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},t.prototype.subtract=function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},t.prototype.invert=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.almostEquals=function(t){return Math.abs(this.x-t.x)<_t.EPSILON&&Math.abs(this.y-t.y)<_t.EPSILON},t.prototype.getNormal=function(t){var n=this.clone();t||n.set(this).normalize();var e=n.x;return n.x=n.y,n.y=-e,n},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.projectOnto=function(t){var n=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=n*t.x,this.y=n*t.y,this},t.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},t.prototype.rotateBy=function(t){var n=-this.horizontalAngle()+t;return this.rotate(n)},t.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},t.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},t.prototype.zero=function(){return this.x=0,this.y=0,this},t}(),mt=function(){function t(t,n,e,r,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=!1),this.start=new gt(t,n),this.stop=new gt(e,r),this.endInclusive=i}return Object.defineProperty(t.prototype,"isZero",{get:function(){return this.start.isZero&&this.stop.isZero},enumerable:!0,configurable:!0}),t.prototype.create=function(t,n,e,r,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=!1),new this.constructor(t,n,e,r,i)},t.prototype.set=function(t){return this.start.set(t.start),this.stop.set(t.stop),this},t.prototype.clone=function(t){return t?t.set(this):this.create(this.start.x,this.start.y,this.stop.x,this.stop.y)},t.prototype.toRange2=function(t){var n=t||new xt,e=this.start,r=this.stop;return n.pos.x=e.x,n.pos.y=e.y,n.size.x=r.x+(this.endInclusive?r.x<e.x?-1:1:0)-e.x,n.size.y=r.y+(this.endInclusive?r.y<e.y?-1:1:0)-e.y,n},t.prototype.scale=function(t,n){void 0===n&&(n=!0);var e=this.stop.x-this.start.x,r=this.stop.y-this.start.y,i=e,o=r;return i*=t.x,o*=t.y,n&&(this.start.x-=(i-e)/2,this.start.y-=(o-r)/2),this.stop.x=this.start.x+i,this.stop.y=this.start.y+o,this},t.prototype.translate=function(t){return this.start.scale(t),this.stop.scale(t),this},t.prototype.equals=function(t){return this.start.equals(t.start)&&this.stop.equals(t.stop)},t.prototype.toInt=function(){return this.start.toInt(),this.stop.toInt(),this},t.prototype.toDecimal=function(){return this.start.toDecimal(),this.stop.toDecimal(),this},t.prototype.area=function(){return(this.stop.x-this.start.x)*(this.stop.y-this.start.y)},t.prototype.move=function(t){return this.start.add(t),this.stop.add(t),this},t.prototype.contains=function(t){return this.start.x<=t.start.x&&this.start.y<=t.start.y&&this.stop.x>=t.stop.x&&this.stop.y>=t.stop.y},t.prototype.intersect=function(t){return this.containsPoint(t.start.x,t.start.y)||this.containsPoint(t.stop.x,t.stop.y)||this.containsPoint(t.start.x,t.stop.y)||this.containsPoint(t.stop.x,t.start.y)},t.prototype.containsPoint=function(t,n){return this.start.x<=t&&this.stop.x>=t&&this.start.y<=n&&this.stop.y>=n},t.prototype.zero=function(){return this.start.zero(),this.stop.zero(),this},t}(),xt=function(){function t(t,n,e,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===r&&(r=0),this.pos=new gt(t,n),this.size=new gt(e,r)}return Object.defineProperty(t.prototype,"isZero",{get:function(){return this.pos.isZero&&this.size.isZero},enumerable:!0,configurable:!0}),t.prototype.create=function(t,n,e,r){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===r&&(r=0),new this.constructor(t,n,e,r)},t.prototype.set=function(t){return this.pos.set(t.pos),this.size.set(t.size),this},t.prototype.clone=function(t){return t?t.set(this):this.create(this.pos.x,this.pos.y,this.size.x,this.size.y)},t.prototype.toRect=function(t,n){void 0===t&&(t=!1);var e=n||new mt;return e.start.x=this.pos.x,e.start.y=this.pos.y,e.stop.x=this.pos.x-(t?this.size.x<0?-1:1:0)+this.size.x,e.stop.y=this.pos.y-(t?this.size.y<0?-1:1:0)+this.size.y,e.endInclusive=t,e},t.prototype.scale=function(t,n){void 0===n&&(n=!0);var e=null;return n&&(e=this.size.clone()),this.size.scale(t),n&&this.pos.add(e.subtract(this.size).multiply(.5)),this},t.prototype.translate=function(t){return this.toRect(!1).translate(t).toRange2(this),this},t.prototype.toInt=function(){return this.pos.toInt(),this.size.toInt(),this},t.prototype.toDecimal=function(){return this.pos.toDecimal(),this.size.toDecimal(),this},t.prototype.contains=function(t){return this.pos.x<=t.pos.x&&this.pos.y<=t.pos.y&&this.pos.x+this.size.x>=t.pos.x+t.size.x&&this.pos.y+this.size.y>=t.pos.y+t.size.y},t.prototype.intersect=function(t){var n=this.toRect(),e=t.clone().toRect();return n.intersect(e)},t.prototype.containsPoint=function(t){return t.x>=this.pos.x&&t.x<=this.pos.x+this.size.x-1&&t.y>=this.pos.y&&t.y<=this.pos.y+this.size.y-1},t.prototype.first=function(t){for(var n=new gt,e=this.pos.x,r=this.pos.y,i=0;i<this.size.x;i++)for(var o=0;o<this.size.y;o++)if(n.x=i+e,n.y=o+r,t(n))return n;return null},t.prototype.forEach=function(t,n){void 0===n&&(n=null);var e=new gt,r=this.pos.clone().toInt();null!==n&&this.containsPoint(n)||(n=r);for(var i=this.pos.clone().add(this.size).toInt(),o=r.y;o<i.y;o+=1)for(var s=r.x;s<i.x;s+=1)if(!(o<n.y||o===n.y&&s<n.x)){e.x=s,e.y=o;if(t(e))return}},t.prototype.equals=function(t){return this.pos.equals(t.pos)&&this.size.equals(t.size)},t.prototype.zero=function(){return this.pos.zero(),this.size.zero(),this},t}(),bt=!0;"undefined"==typeof window?(yt=null,bt=!1):yt=window;var wt=new(function(){function t(){this._window=yt,this._nativeWindow=bt}return Object.defineProperty(t.prototype,"window",{get:function(){return this._window},set:function(t){this._window=t,this.hasNativeWindow&&(yt=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasNativeWindow",{get:function(){return this._nativeWindow},enumerable:!0,configurable:!0}),t}()),Ot=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},Et=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Ot(arguments[n]));return t},It=Object.freeze({hasWindow:e,hasConsole:r,isArray:i,isElement:function(t){return void 0!==t&&null!==t&&1===t.nodeType},isFunction:o,isNumber:s,isInt:function(t){return s(t)&&t===(0|t)},isString:function(t){return h(t)&&t.constructor===String},areNullOrUndefined:u,areNotNullOrUndefined:a,isNullOrUndefined:c,isNotNullOrUndefined:h,areUndefined:l,areNotUndefined:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!l.apply(void 0,Et(t))},isUndefined:f,isNotUndefined:p}),jt=Object.freeze({destroy:function(t){void 0!==t.constructor.prototype.destroy?t.destroy():d(t)},wipe:y,setNull:d,isClassOf:v,isSameClass:_,inherits:function(t,n){return v(t,n)&&!_(t,n)},equals:g,isDifferent:m,shallowCopy:function(t){for(var n=Object.keys(t),e={},r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e},clone:x,cloneInto:b,mixin:function(t,n){void 0===t&&(t={});for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=t,s=e?e.length:0,u=0;for(e=O(e);u<s;u++){var a=e[u];if(o(a)&&(a=a.prototype),void 0!==a){var c=Object.keys(a),h=null;if(n)for(var l=-1,f=c.length;++l<f;)h=c[l],n.hasOwnProperty(h)||(t[h]=a[h]);else for(var p=-1,y=c.length;++p<y;)t[h=c[p]]=a[h]}}return i},setProperties:w}),St=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},At=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(St(arguments[n]));return t},zt=Object.freeze({flatten:O,reverse:I,concat:j,slice:S,splice:A,append:z,removeAt:P,indexOfElement:R,remove:N,indexOf:D,removeOneByFn:function(t,n){P(t,D(t,n))},shallowCopy:T,shallowCopyInto:k,shallowFill:function(t,n,e){void 0===e&&(e=0);var r=-1,i=c(t)?0:t.length;for(n.length<i+e&&(n.length=i+e);++r<i;)n[e+r]=t[r]},deepCopy:M,deepCopyInto:C,deepFill:function(t,n,e){void 0===e&&(e=0);var r=-1,i=c(t)?0:t.length;for(n.length<i+e&&(n.length=i+e);++r<i;)n[e+r]=x(t[r])},filter:L,filterInto:U,map:F,mapInto:q,reduce:G,reduceUntil:Z,reverseReduce:B,reverseReduceUntil:J,forEach:V,forSome:W,until:H,reverseForEach:K,reverseUntil:Y,some:X,all:Q,insertAt:$,binarySearch:tt,create:nt,deserialize:et}),Pt=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},Rt=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},Nt=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Pt(arguments[n]));return t},Dt=function(){function t(){this._lookup=Object.create(null),this._list=new Mt,this._isDirty=!1}return t.prototype.create=function(){return new this.constructor},t.prototype.has=function(t){return void 0!==this._lookup[t]},t.prototype.contains=function(t){return this.has(t)},t.prototype.get=function(t){return this._lookup[t]},t.prototype.set=function(t,n){return this._isDirty=this._isDirty||this.has(t),void 0!==n&&(this._lookup[t]=n,this._isDirty||this._list.push(n)),this},t.prototype.delete=function(t){return this.has(t)&&(delete this._lookup[t],this._isDirty=!0),this},t.prototype.clear=function(){return y(this._lookup),this._list.clear(),this},Object.defineProperty(t.prototype,"values",{get:function(){return this.cleanList(),this._list.values},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this._lookup)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this.cleanList(),this._list},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._isDirty?this.keys.length:this._list.count},enumerable:!0,configurable:!0}),t.prototype.cleanList=function(){this._isDirty&&this.reCreateList()},t.prototype.reCreateList=function(){var t=this._lookup,n=Object.keys(this._lookup),e=-1,r=this._list;for(r.clear();++e<n.length;)r.add(t[n[e]])},t.prototype.clone=function(){var t=this.create();return t._isDirty=this._isDirty,t._list=this._list.clone(),t._lookup=x(this._lookup),t},t.prototype.toJSON=function(){return this._lookup},t.prototype.serialize=function(){var t=this,n=Object.create(null);return V(this.keys,function(e){var r=t.get(e);n[e]=o(r.serialize)?r.serialize():r}),n},t.prototype.deserialize=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=Pt(n),i=r[0],o=r.slice(1);if(this.clear(),p(i))if(p(i.prototype.deserialize))try{for(var s=Rt(Object.keys(t)),u=s.next();!u.done;u=s.next()){h=u.value;this.set(h,(_=new i).deserialize.apply(_,Nt([t[h]],o)))}}catch(t){d={error:t}}finally{try{u&&!u.done&&(v=s.return)&&v.call(s)}finally{if(d)throw d.error}}else try{for(var a=Rt(Object.keys(t)),c=a.next();!c.done;c=a.next()){var h=c.value,l=new i;w(l,t[h]),this.set(h,l)}}catch(t){g={error:t}}finally{try{c&&!c.done&&(m=a.return)&&m.call(a)}finally{if(g)throw g.error}}else try{for(var f=Rt(Object.keys(t)),y=f.next();!y.done;y=f.next()){h=y.value;this.set(h,t[h])}}catch(t){x={error:t}}finally{try{y&&!y.done&&(b=f.return)&&b.call(f)}finally{if(x)throw x.error}}return this;var d,v,_,g,m,x,b},t}(),Tt=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},kt=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Tt(arguments[n]));return t};e()&&!window.Symbol&&(window.Symbol={iterator:"iterator"});var Mt=function(){function t(n){this._array=[],this._index=null,this._indexer=null,this._pointer=0,this._array=void 0===n?new Array:T(n instanceof t?n._array:n)}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(t){return{done:this._pointer>=this.length,value:this._pointer<this.length?this._array[this._pointer++]:void(this._pointer=0)}},t.prototype.create=function(t){return new this.constructor(t)},Object.defineProperty(t.prototype,"values",{get:function(){return this._array},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._array[t]},t.prototype.getByIndex=function(t){return h(this._index)?this._index.get(t):void 0},t.prototype.set=function(t,n){if(!(t>=0&&t<this.length))throw new Error("index out of bounds on <List>.set("+t+", "+n.toString()+")");return this._array[0|t]=n,null!==this._indexer&&this._index.set(this._indexer(n),n),this},Object.defineProperty(t.prototype,"count",{get:function(){return this._array.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._array.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indexer",{get:function(){return this._indexer},set:function(t){this._indexer=t,this._reindex()},enumerable:!0,configurable:!0}),t.prototype._reindex=function(){var t=this;null===this._indexer?this._index=null:(null===this._index?this._index=new Dt:this._index.clear(),this.forEach(function(n){return t._index.set(t._indexer(n),n)}))},t.prototype.fill=function(t,n){return t=Math.max(0,t||0),o(n)?this._array=nt(t,n):n instanceof Object?this._array=nt(t,function(){return x(n)}):this._array=nt(t,function(){return n}),this._reindex(),this},t.prototype.clear=function(){return this._array.length=0,null!==this._index&&this._index.clear(),this},t.prototype.add=function(t){return this._array.push(t),null!==this._indexer&&this._index.set(this._indexer(t),t),this},t.prototype.insertAt=function(t,n){return $(this._array,t,n),null!==this._indexer&&this._index.set(this._indexer(n),n),this},t.prototype.push=function(t){return null!==this._indexer&&this._index.set(this._indexer(t),t),this._array.push(t)},t.prototype.pop=function(){var t=this._array.pop();return void 0!==t&&null!==this._indexer&&this._index.delete(this._indexer(t)),t},t.prototype.shift=function(){var t=this._array.shift();return void 0!==t&&null!==this._indexer&&this._index.delete(this._indexer(t)),t},t.prototype.concat=function(n){var e,r=n instanceof t?n.values:n;return e=j(this._array,r),this.create(e)},t.prototype.index=function(t){var n=this;null!==this._indexer&&V(t,function(t){n._index.set(n._indexer(t),t)})},t.prototype.unindexEl=function(t){null!==this._indexer&&this._index.delete(this._indexer(t))},t.prototype.append=function(n){var e=n instanceof t?n.values:n;return z(this._array,e),this.index(e),this},t.prototype.copy=function(n){var e=n instanceof t?n.values:n;return C(e,this._array),this.index(e),this},t.prototype.shallowCopy=function(n){var e=n instanceof t?n.values:n;return k(e,this._array),this.index(e),this},t.prototype.clone=function(){var t=M(this._array),n=this.create(t);return null!==this._indexer&&(n._indexer=this._indexer,n._index=this._index.clone()),n},t.prototype.remove=function(t){return N(this._array,t),this.unindexEl(t),this},t.prototype.removeFirst=function(t){var n=this.removeAt(this.indexOf(t));return this.unindexEl(n),n},t.prototype.removeAt=function(t){var n=P(this._array,t);return this.unindexEl(n),n},t.prototype.forEach=function(t,n){return void 0===n&&(n=0),V(this._array,t,n),this},t.prototype.forSome=function(t,n){return W(this._array,t,n),this},t.prototype.until=function(t,n,e){return H(this._array,t,n,e),this},t.prototype.reverseForEach=function(t){return K(this._array,t),this},t.prototype.reverseUntil=function(t,n){return Y(this._array,t,n),this},t.prototype.some=function(t){return X(this._array,t)},t.prototype.all=function(t){return Q(this._array,t)},t.prototype.indexOf=function(t){return o(t)?D(this._array,t):R(this._array,t)},t.prototype.contains=function(t){return o(t)?void 0!==this.find(t):null!==this._indexer?this._index.contains(this._indexer(t)):-1!==R(this._array,t)},t.prototype.reverse=function(){return I(this._array),this},t.prototype.first=function(t){var n=-1;return-1===(n=void 0===t?0:D(this._array,t))?void 0:this.get(n)},t.prototype.find=function(t){return this.first(t)},t.prototype.last=function(){return 0===this.length?void 0:this.get(this.length-1)},t.prototype.filter=function(t){return this.create(L(this._array,t))},t.prototype.select=function(t){return this.create(L(this._array,t))},t.prototype.selectInto=function(n,e){var r=n instanceof t?n.values:n;return U(r,this._array,e),this.index(r),this},t.prototype.head=function(t){return void 0===t&&(t=1),t=Math.max(0,t),this.create(S(this._array,0,t))},t.prototype.tail=function(t){return void 0===t&&(t=1),t=Math.min(this._array.length,t),this.create(S(this._array,Math.max(0,this._array.length-t)))},t.prototype.splice=function(t,n,e){return void 0===t&&(t=0),void 0===n&&(n=1/0),void 0===e&&(e=[]),A(this._array,t,n,i(e)?e:e.values),this._reindex(),this},t.prototype.orderBy=function(t){return this._array.sort(t),this},t.prototype.map=function(t){return this.create(F(this._array,t))},t.prototype.mapInto=function(n,e){return q(n instanceof t?n.values:n,this._array,e),this._reindex(),this},t.prototype.reduce=function(t,n){return G(this._array,t,n)},t.prototype.reduceUntil=function(t,n,e){return Z(this._array,t,n,e)},t.prototype.reverseReduce=function(t,n){return B(this._array,t,n)},t.prototype.reverseReduceUntil=function(t,n,e){return J(this._array,t,n,e)},t.prototype.equals=function(t){return g(this._array,t.values)},t.prototype.same=function(t){var n=this,e=0;return n.length===t.length&&(null!==n.indexer?t.until(function(t){return!n.contains(t)},function(t,n){return++e}):n.until(function(n){return!t.contains(n)},function(t,n){return++e})),e===n.length},t.prototype.intersect=function(t){var n,e,r=this.create();return r.indexer=this.indexer,this.length<t.length?(e=this,n=t):(n=this,e=t),null!==n.indexer?e.forEach(function(t){n.contains(t)&&r.push(t)}):n.forEach(function(t){e.contains(t)&&r.push(t)}),r},t.prototype.union=function(t){var n,e,r=this.create();return r.indexer=this.indexer,this.length<t.length?(e=this,n=t):(n=this,e=t),null!==n.indexer?(r=n.clone(),e.forEach(function(t){n.contains(t)||r.push(t)})):(r=e.clone(),n.forEach(function(t){e.contains(t)||r.push(t)})),r},t.prototype.subtract=function(t){var n=this.create();return n.indexer=this.indexer,n=this.select(function(n){return!t.contains(n)})},t.prototype.zip=function(t,n){void 0===n&&(n=function(t,n){return[t,n]});var e=this.create(),r=t.length;return this.until(function(t,n){return n>=r},function(r,i){e.push(n(r,t.get(i)))}),e},t.prototype.unzip=function(t){void 0===t&&(t=function(t){return[t[0],t[1]]});var n=[this.create(),this.create()];return this.forEach(function(e){var r=t(e);n[0].push(r[0]),n[1].push(r[1])}),n},t.prototype.flatten=function(t){return void 0===t&&(t=1/0),this.create(t<1?this.values:this._flattenInner(this.values,t))},t.prototype._flattenInner=function(n,e,r,o){void 0===r&&(r=-1),void 0===o&&(o=[]);var s=-1,u=n.length;if(++r>e)o.push(n);else for(;++s<u;)i(n[s])?this._flattenInner(n[s],e,r,o):n[s]instanceof t?this._flattenInner(n[s].values,e,r,o):o.push(n[s]);return o},t.prototype.toJSON=function(){return this.values},t.prototype.serialize=function(){return this.values.map(function(t){return o(t.serialize)?t.serialize():t})},t.prototype.deserialize=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return et.apply(zt,kt([t,this._array],n)),this},t}(),Ct=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},Lt=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Ct(arguments[n]));return t};e()&&!window.Symbol&&(window.Symbol={iterator:"iterator"});var Ut,Ft=function(){function t(n,e){void 0===n&&(n=function(t,n){return t<n?-1:t===n?0:1}),this._list=new Mt,this._pointer=0,this._cmp=n,void 0===e?this._list=new Mt:e instanceof Mt||e instanceof t?this.copy(e.values):this.copy(e)}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(t){return{done:this._pointer>=this.length,value:this._pointer<this.length?this.values[this._pointer++]:void(this._pointer=0)}},t.prototype.create=function(t,n){return new this.constructor(t,n)},Object.defineProperty(t.prototype,"values",{get:function(){return this._list.values},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._list.get(t)},Object.defineProperty(t.prototype,"count",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"comparer",{get:function(){return this._cmp},set:function(t){this._cmp=t,this.sort()},enumerable:!0,configurable:!0}),t.prototype.sort=function(){this._list.orderBy(this._cmp)},t.prototype.fill=function(t,n){return this._list.fill(t,n),this.sort(),this},t.prototype.clear=function(){return this._list.clear(),this},t.prototype.add=function(t){var n=this.getInsertIndex(t);return this._list.insertAt(n,t),this},t.prototype.pop=function(){return this._list.pop()},t.prototype.shift=function(){return this._list.shift()},t.prototype.bulkAdd=function(n){return n instanceof Mt||n instanceof t?this._list.append(n.values):this._list.append(n),this.sort(),this},t.prototype.copy=function(n){return n instanceof Mt||n instanceof t?this._list.copy(n.values):this._list.copy(n),this.sort(),this},t.prototype.clone=function(){return this.create(this._cmp,this._list.clone())},t.prototype.remove=function(t){var n=this.indexOf(t);return-1!==n&&this._list.removeAt(n),this},t.prototype.removeAt=function(t){return this._list.removeAt(t)},t.prototype.removeFirst=function(t){return this._list.removeFirst(t)},t.prototype.forEach=function(t,n){return void 0===n&&(n=0),this._list.forEach(t,n),this},t.prototype.forSome=function(t,n){return this._list.forSome(t,n),this},t.prototype.until=function(t,n,e){return this._list.until(t,n,e),this},t.prototype.reverseForEach=function(t){return this._list.reverseForEach(t),this},t.prototype.reverseUntil=function(t,n){return this._list.reverseUntil(t,n),this},t.prototype.some=function(t){return this._list.some(t)},t.prototype.all=function(t){return this._list.all(t)},t.prototype.getInsertIndex=function(t){var n=this;return tt(this._list.values,function(e){return n._cmp(e,t)},!0)},t.prototype.indexOf=function(t){var n=this;return t instanceof Function?this._list.indexOf(t):tt(this._list.values,function(e){return n._cmp(e,t)},!1)},t.prototype.contains=function(t){return-1!==this.indexOf(t)},t.prototype.first=function(t){return this._list.first(t)},t.prototype.find=function(t){return this._list.find(t)},t.prototype.last=function(){return this._list.last()},t.prototype.filter=function(t){return this.create(this._cmp,this._list.filter(t))},t.prototype.select=function(t){return this.create(this._cmp,this._list.filter(t))},t.prototype.selectInto=function(n,e){return n instanceof Mt||n instanceof t?this._list.selectInto(n.values,e):this._list.selectInto(n,e),this.sort(),this},t.prototype.head=function(t){return void 0===t&&(t=1),this.create(this.comparer,this._list.head(t))},t.prototype.tail=function(t){return void 0===t&&(t=1),this.create(this.comparer,this._list.tail(t))},t.prototype.map=function(t){return this._list.map(t)},t.prototype.mapInto=function(n,e){return n instanceof Mt||n instanceof t?this._list.mapInto(n.values,e):this._list.mapInto(n,e),this.sort(),this},t.prototype.reduce=function(t,n){return this._list.reduce(t,n)},t.prototype.reduceUntil=function(t,n,e){return this._list.reduceUntil(t,n,e)},t.prototype.reverseReduce=function(t,n){return this._list.reverseReduce(t,n)},t.prototype.reverseReduceUntil=function(t,n,e){return this._list.reverseReduceUntil(t,n,e)},t.prototype.equals=function(t){return g(this._list.values,t.values)},t.prototype.same=function(t){return this.equals(t)},t.prototype.intersect=function(n){var e,r,i=this.create(this.comparer);if(this.length>0&&n.length>0)if(this.length<n.length?(r=this,e=n):(e=this,r=n),n instanceof t&&this.comparer===n.comparer)for(var o=e.getInsertIndex(r.get(0))-1,s=e.getInsertIndex(r.last())-1,u=-1,a=r.length;o<s&&++u<a;){for(var c=r.get(u),h=void 0;++o<s&&(h=this.comparer(e.get(o),c))<0;);o<s&&0===h&&i.add(c)}else e instanceof t||e instanceof Mt&&null!==e.indexer?r.forEach(function(t){e.contains(t)&&i.add(t)}):i=i.bulkAdd(r.toList().intersect(e));return i},t.prototype.union=function(n){var e,r,i;if(this.length>0||n.length>0)if(this.length<n.length?(i=this,r=n):(r=this,i=n),n instanceof t&&this.comparer===n.comparer){e=this.create(this.comparer,r.values);for(var o=r.getInsertIndex(i.get(0))-1,s=r.getInsertIndex(i.last())-1,u=-1,a=i.length;++u<a&&o<s;){for(var c=i.get(u),h=-1;++o<s&&(h=this.comparer(r.get(o),c))<0;);(h>0&&o<s||o===s)&&e.add(c)}if(u<a)for(--u;++u<a;)e.add(i.get(u))}else r instanceof t||r instanceof Mt&&null!==r.indexer?(e=this.create(this.comparer,r.values),i.forEach(function(t){r.contains(t)||e.add(t)})):e=this.create(this.comparer,i.toList().union(r));else e=this.create(this.comparer);return e},t.prototype.toList=function(){return new Mt(this.values)},t.prototype.toJSON=function(){return this.values},t.prototype.serialize=function(){return this.values.map(function(t){return o(t.serialize)?t.serialize():t})},t.prototype.deserialize=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return(r=this._list).deserialize.apply(r,Lt([t],n)),this.sort(),this;var r},t}(),qt=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},Gt=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(qt(arguments[n]));return t},Zt=function(){function t(t){this.DEFAULT_SIZE=100,this._pos=0,this._limit=0,t||(t=this.DEFAULT_SIZE),this.DEFAULT_SIZE=t,this._array=new Array(t),this.push=this.fastPush}return Object.defineProperty(t.prototype,"values",{get:function(){return S(this._array,0,this._pos)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return this._limit},set:function(t){t<0&&(t=0),this._limit=t,0===t?this.push=this.fastPush:(this.push=this.limitedPush,this.limitObjects())},enumerable:!0,configurable:!0}),t.prototype.create=function(t){return new this.constructor(t)},t.prototype.push=function(t){},t.prototype.fastPush=function(t){this._array[this._pos++]=t},t.prototype.limitedPush=function(t){this._array[this._pos]=t,++this._pos,this.limitObjects()},t.prototype.pop=function(){var t=void 0;return 0!==this._pos&&(t=this._array[--this._pos]),t},t.prototype.peek=function(){return this._array[this._pos-1]},t.prototype.peekAt=function(t){return t<0||t>=this._pos?void 0:this._array[this._pos-t-1]},t.prototype.toList=function(){new Mt;return new Mt(this.values)},t.prototype.clear=function(){return this._pos=0,this._array.length=this.DEFAULT_SIZE,this},t.prototype.clone=function(){var t=M(this._array),n=this.create(this.DEFAULT_SIZE);return n._array=t,n._limit=this._limit,n._pos=this._pos,n},t.prototype.limitObjects=function(){for(;this._pos>this._limit;)this._array.shift(),--this._pos},t.prototype.toJSON=function(){return S(this.values,0,this._pos)},t.prototype.serialize=function(){return S(this.values,0,this._pos).map(function(t){return o(t.serialize)?t.serialize():t})},t.prototype.deserialize=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return et.apply(void 0,Gt([t,this._array],n)),this._pos=t.length,this},t}(),Bt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jt=function(){function t(){}return t._hasPerformance="undefined"!=typeof performance,t}(),Vt=function(){function t(){}return Object.defineProperty(t,"time",{get:function(){return Jt._time},enumerable:!0,configurable:!0}),t.now=function(){if(Jt._hasPerformance)return performance.now();var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},t.start=function(){var n=t.now();return Jt._start=Jt._last=n,Jt._time=0},t.stop=function(){var n=Jt._start,e=t.now();return Jt._last=e,Jt._time=e-n},t}(),Wt=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},Ht=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Wt(arguments[n]));return t},Kt=function(){function t(t){void 0===t&&(t=""),this.name="",this._value=0,this.name=t}return t.prototype.log=function(){console.log("Counter "+this.name+": "+this.toString())},t.prototype.inc=function(){return this._value++,this},t.prototype.reset=function(){return this._value=0,this},t.prototype.valueOf=function(){return this._value},t.prototype.toString=function(){return this._value.toString()},t}(),Yt=function(){function t(){}return t._int={0:0},t._counter={"":new Kt("")},t}(),Xt=Object.freeze({init:function(t){void 0!==t&&(wt.window=t)},getFunctionName:function(t){var n;if(void 0!==t.hasOwnProperty("name"))n=t.name;else{var e=t.toString();n=e.substring(9,e.indexOf("("))}return n},getFunctionCode:function(t){var n=t.toString();return n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))},newUUID:it,newInt:function(t){return void 0===t&&(t=0),void 0===Yt._int[t]&&(Yt._int[t]=0),Yt._int[t]++},counter:ot,count:function(t){return void 0===t&&(t=""),ot(t).inc()},callDebugger:st,pipeOut:function(t,n,i){if(r())ut(console,"log",function(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];n.apply(void 0,Ht(e)),t.apply(void 0,Ht(e))}),ut(console,"warn",function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t.apply(void 0,Ht(e)),n.apply(void 0,Ht(e))}),ut(console,"error",function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];t.apply(void 0,Ht(n)),i.apply(void 0,Ht(n))});else{var o={log:t,warn:n,error:i};e()||(wt.window={}),wt.window.console=o}},assert:function(t,n,e){void 0===e&&(e=!0);var i=!0;return t||(r&&(i=!1,console.error("Assertion failed: "+n)),e&&st()),i},proxyFn:ut,loop:function(t,n){for(var e=-1;++e<t;)n(e)},toArray:function(t){return Array.prototype.slice.call(t)}}),Qt=function(t,n,e,r){var i,o=arguments.length,s=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,n,e,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(n,e,s):i(n,e))||s);return o>3&&s&&Object.defineProperty(n,e,s),s},$t=function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},tn=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},nn=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(tn(arguments[n]));return t},en=function(){function t(t){this.id="",this.parent=null,this.children=null,this.data=null,this.virtual=!1,this.id=t||it()}return n=t,t.fromObject=function(t){var e=this instanceof n?this:null,r=new n(t.id).init({data:t.data,parent:e});return void 0!==t.children&&i(t.children)&&(r.children=new Mt(F(t.children,n.fromObject.bind(r)))),r},t.fromNodeList=function(t,e,r){void 0===r&&(r=!1);var i=new n,o=function(t){return e&&void 0!==e[t]?"string"==typeof e[t]?function(n){return n[e[t]]}:e[t]:function(n){return n[t]}},s={id:o("id"),parent:o("parent"),data:o("data")},u=new Mt(t),a=new Dt,c=u.map(function(t){return(new n).init({id:s.id(t),data:s.data(t)})});c.forEach(function(t,n){a.has(t.id)||a.set(t.id,[]),a.get(t.id).push(t)});var h=new Mt;return u.forEach(function(t,n){var e=s.parent(t);s.id(t);a.contains(e)?a.get(e).forEach(function(t){return t.add(c.get(n))}):h.add(c.get(n))}),!1===r?i=h.first():(i=(new n).init({virtual:!0}),h.forEach(function(t){return i.add(t)})),i},t.prototype.create=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=this.constructor).bind.apply(e,nn([void 0],t)));var e},t.prototype.init=function(t){return w(this,t),this},t.prototype.insertAt=function(t,n,e){var r;return null===this.children||this.children.count<=t?r=this.add(n):(r=this.create(e).init({data:n,parent:this}),this.children.insertAt(t,r)),r},t.prototype.add=function(t,n){var e;return null===this.children&&(this.children=new Mt),_(t,this)?((e=t).parent=this,this.children.add(e)):(e=this.create(n).init({data:t,parent:this}),this.children.add(e)),e},t.prototype.remove=function(){null!==this.parent&&this.parent.children.remove(this)},t.prototype.prune=function(){return null!==this.children&&this.children.forEach(function(t,n){t.parent=null}).clear(),this.children=null,this},t.prototype.reduce=function(t,n){var e=new Zt,r=n;t||(t=function(t,n){return t.push({id:n.id,parent:n.parent?n.parent.id:null,data:n.data}),t}),void 0===n&&(r=[]);var i,o;for(e.push(this);i=e.pop();)for(r=t(r,i),o=i.children&&i.children.count||0;o--;)e.push(i.children.get(o));return r},t.prototype.clone=function(){var t=this.create();return t.id=this.id,t.parent=this.parent,t.children=null===this.children?null:this.children.clone(),t.data=null===this.data||void 0===this.data?this.data:x(this.data),t},t.prototype.duplicateNode=function(){var t=this.create();return t.id=this.id,t.parent=this.parent,t.children=this.children,t.data=this.data,t},t.prototype.filter=function(t){var n=this.duplicateNode();return null!==this.children&&(n.children=n.children.select(t).map(function(n,e){return n.filter(t)})),n},t.prototype.select=function(t,n){void 0===n&&(n=new Mt);var e=n,r=this.children;return(void 0===t||t(this))&&e.add(this),r&&r.reduce(function(n,e){return e.select(t,n)},e),e},t.prototype.find=function(t){var n=null;if(null!==this.children)for(var e=-1,r=this.children.count,i=this.children.values;++e<r;){if(t(i[e].data)){n=i[e];break}if(null!==(n=null!==i[e].children?i[e].find(t):null))break}return n},t.prototype.depth=function(){for(var t=0,n=this;n.parent;)n=n.parent,++t;return t},t.prototype.sort=function(t){return null!==this.children&&(this.children.orderBy(t),this.children.forEach(function(n){return n.sort(t)})),this},t.prototype.toJSON=function(){var t=new Mt;return t.push({id:this.id,data:this.data,parent:null===this.parent?null:this.parent.id,children:null===this.children?null:this.children.map(function(t){return t.id})}),null!==this.children&&this.children.forEach(function(n){return t.append(n.toJSON())}),t.toJSON()},t.prototype.serialize=function(){var t=new Mt;return t.push({id:this.id,data:this.data,parent:null===this.parent?null:this.parent.id,children:null===this.children?null:this.children.map(function(t){return t.id})}),null!==this.children&&this.children.forEach(function(n){return t.append(n.serialize())}),t.serialize()},t=n=Qt([rt,$t("design:paramtypes",[Object])],t);var n}(),rn=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Ut||(Ut={}));var on=function(){function t(){}return t.Sides=Ut,t._window=wt.window,t._document=wt.window?wt.window.document:void 0,t._el=wt.window?wt.window.document.createElement("div"):void 0,t}(),sn=Object.freeze({get Sides(){return Ut},init:function(t){wt.window=t,on._window=wt.window,on._document=on._window.document,on._el=on._document.createElement("div")},toArray:at,create:function(t,n){var e;return on._el.innerHTML=t,e=on._el.children[0],ct(e,n),ht(on._el),e},outerHTML:function(t){on._el.appendChild(t);var n=on._el.innerHTML;return ht(on._el),n},setAttr:ct,remove:function(t){return void 0===t.parentNode?null:t.parentNode.removeChild(t)},replace:function(t,n){var e=n;return t.parentNode&&t.parentNode.replaceChild(n,t),e},clear:ht,get:lt,find:function(t){return on._document.querySelector(t)},findAll:function(t,n){return at((n||on._document).querySelectorAll(t))},children:function(t,n){var e=at((t||on._document).children);return void 0===n?e:e.filter(ft.bind(this,n))},findParent:function(t,n){for(var e=t.parentElement;e&&!ft(n,e);)e=e.parentElement;return e},position:function(t,n,e){t.style.top=e+"px",t.style.left=n+"px"},is:ft,setStylesExplicitly:function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=on._window.getComputedStyle(t);try{for(var i=rn(n),o=i.next();!o.done;o=i.next()){var s=o.value;t.style[s]=r[s]}}catch(t){u={error:t}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(u)throw u.error}}var u,a}}),un=function(){function t(){this._a=null,this.hash="",this.pathName="",this.port="",this.hostName="",this.protocol="",this.origin="",this.full="",this.args={},this.init()}return t.prototype.init=function(){if(null!==wt.window){this._a=wt.window.document.createElement("a"),this._a.setAttribute("href",wt.window.location.href);var t=this.args;this._a.search.substring(1).split("&").forEach(function(n){var e=n.split("=");t[e[0]]=e[1]}),this.hash=this._a.hash,this.pathName=this._a.pathname,this.port=this._a.port,this.hostName=this._a.hostname,this.protocol=this._a.protocol,this.origin=this._a.origin,this.full=this._a.href}},t}(),an=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cn=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},hn=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(cn(arguments[n]));return t},ln=function(t,n,e){var r=e.value;return e.value=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return new Promise(function(e,i){try{e(r.apply(t,n))}catch(t){i(t)}})},e};ln.before=function(t){return function(n,e,r){var i=r.value;return r.value=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new Promise(function(r,o){var s=function(){i.apply(n,e).then(function(t){r(t)}).catch(function(t){o(t)})};t.apply(n,[i.name].concat(e)).then(function(t){s()}).catch(function(t){s()})})},r}},ln.after=function(t){return function(n,e,r){var i=r.value;return r.value=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new Promise(function(r,o){var s=function(s,u){t.apply(n,[s,u,i.name].concat(e)).then(function(t){r(t)}).catch(function(t){o(t)})};i.apply(n,e).then(function(t){s(t,void 0)}).catch(function(t){s(void 0,t)})})},r}},ln.provided=function(t){return function(n,e,r){var i=r.value;return r.value=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new Promise(function(r,o){t.apply(n,[i.name].concat(e)).then(function(t){t?i.apply(n,e).then(function(t){r(t)}).catch(function(t){o(t)}):o(!1)}).catch(function(t){o(t)})})},r}};var fn,pn=function(){function t(t,n){void 0===n&&(n=10),this._pool=[],this._available=0,this._size=0,this._cls=t,this._growthStep=n,this.create()}return Object.defineProperty(t.prototype,"available",{get:function(){return this._available},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.create=function(){for(var t=0;t<this._growthStep;t++)this._pool.push(new this._cls);this._size+=this._growthStep,this._available+=this._growthStep},t.prototype.get=function(){var t;return 0===this._pool.length&&this.create(),t=this._pool.pop(),--this._available,t.initPool(this),t},t.prototype.release=function(t){this._pool.push(t),++this._available},t}();!function(t){t[t.LinearInt=0]="LinearInt",t[t.RandomInt=1]="RandomInt",t[t.LinearFloat=2]="LinearFloat",t[t.RandomFloat=3]="RandomFloat"}(fn||(fn={}));var yn=" ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",dn=Object.freeze({get MocDataType(){return fn},VALID_CHARS:yn,randomString:function(t){void 0===t&&(t=25);for(var n="",e=0;e<t;e+=1)n+=yn.charAt(Math.floor(Math.random()*yn.length));return n},randomInt:function(){return 0|this.randomNumber()},randomNumber:function(){return 2147483647*Math.random()},numericArray:function(t,n){void 0===n&&(n=fn.LinearInt);var e=new Array(t);switch(n){case fn.RandomInt:for(r=0;r<t;r+=1)e[r]=this.randomInt();break;case fn.LinearFloat:for(r=0;r<t;r+=1)e[r]=r+.5;break;case fn.RandomFloat:for(r=0;r<t;r+=1)e[r]=this.randomNumber();break;default:for(var r=0;r<t;r+=1)e[r]=r}return e},stringArray:function(t,n){for(var e=new Array(t),r=-1;++r<t;)e[r]=this.randomString(n);return e}}),vn=function(){return function(){}}(),_n=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};return t.Calc=vt,t.Dom=sn,t.Arr=zt,t.Obj=jt,t.Util=Xt,t.Test=It,t.MocData=dn,t.Vec2=gt,t.Vec2Const=_t,t.Range2=xt,t.Rect=mt,t.List=Mt,t.SortedList=Ft,t.Dictionary=Dt,t.Stack=Zt,t.Tree=en,t.Timer=Vt,t.Uri=un,t.Poolable=pt,t.Initable=rt,t.before=function(t){return function(n,e,r){var i=r.value;return r.value=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.apply(this,[i.name].concat(n)),i.apply(this,n)},r}},t.after=function(t){return function(n,e,r){var i=r.value;return r.value=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=i.apply(this,[i.name].concat(n));return t.apply(this,n),r},r}},t.around=function(t){return function(n,e,r){var i=r.value;return r.value=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o;return t.apply(this,[function(){return o=i.apply(n,e)},i.name].concat(e)),o},r}},t.provided=function(t){return function(n,e,r){var i=r.value;return r.value=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r;return t.apply(this,[i.name].concat(n))&&(r=i.apply(this,n)),r},r}},t.async=ln,t.Pool=pn,t.integrate=function(t){var n=!1,e=[{name:"Arr",object:zt},{name:"Calc",object:vt},{name:"Dom",object:sn},{name:"MocData",object:dn},{name:"Obj",object:jt},{name:"Initable",object:rt},{name:"Poolable",object:pt},{name:"Pool",object:pn},{name:"Dictionary",object:Dt},{name:"KeyValuePair",object:vn},{name:"List",object:Mt},{name:"Range2",object:xt},{name:"Rect",object:mt},{name:"Stack",object:Zt},{name:"Tree",object:en},{name:"Vec2",object:gt},{name:"Test",object:It},{name:"Timer",object:Vt},{name:"Uri",object:un},{name:"Util",object:Xt}];"string"==typeof t&&(wt.window[t]={},n=!0);try{for(var r=_n(e),i=r.next();!i.done;i=r.next()){var o=i.value;n?wt.window[t][o.name]=o.object:wt.window[o.name]=o.object}}catch(t){s={error:t}}finally{try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}}var s,u},t.KeyValuePair=vn,t}({});
//# sourceMappingURL=goodcore.es5.iife.min.js.map
